{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":85},"end":{"line":6,"column":65,"index":150}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":151},"end":{"line":7,"column":40,"index":191}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}},{"name":"../store/appStore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":192},"end":{"line":8,"column":62,"index":254}}],"key":"/bohzyw2mCiLwBL1LhK3cj9dt4o=","exportNames":["*"],"imports":1}},{"name":"../services/beaconScanner","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":9,"column":0,"index":255},"end":{"line":14,"column":35,"index":379}}],"key":"BHEtprxFZbpJurUGq47L1Pm/D5Q=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":15,"column":0,"index":380},"end":{"line":21,"column":25,"index":511}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  /**\n   * useBeaconScanner Hook\n   * React hook for iBeacon scanning and positioning\n   */\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useBeaconScanner = useBeaconScanner;\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[2], \"react\");\n  var _reactNative = require(_dependencyMap[3], \"react-native\");\n  var _storeAppStore = require(_dependencyMap[4], \"../store/appStore\");\n  var _servicesBeaconScanner = require(_dependencyMap[5], \"../services/beaconScanner\");\n  var _servicesApi = require(_dependencyMap[6], \"../services/api\");\n  function useBeaconScanner() {\n    _s();\n    // Scanner state\n    var _useState = (0, _react.useState)(false),\n      _useState2 = (0, _slicedToArray.default)(_useState, 2),\n      isScanning = _useState2[0],\n      setIsScanning = _useState2[1];\n    var _useState3 = (0, _react.useState)({\n        isScanning: false,\n        bluetoothEnabled: false,\n        permissionsGranted: false\n      }),\n      _useState4 = (0, _slicedToArray.default)(_useState3, 2),\n      scannerStatus = _useState4[0],\n      setScannerStatus = _useState4[1];\n    var _useState5 = (0, _react.useState)([]),\n      _useState6 = (0, _slicedToArray.default)(_useState5, 2),\n      scannedBeacons = _useState6[0],\n      setScannedBeacons = _useState6[1];\n\n    // Position state\n    var _useState7 = (0, _react.useState)(null),\n      _useState8 = (0, _slicedToArray.default)(_useState7, 2),\n      currentPosition = _useState8[0],\n      setCurrentPosition = _useState8[1];\n    var _useState9 = (0, _react.useState)(false),\n      _useState0 = (0, _slicedToArray.default)(_useState9, 2),\n      isPositioning = _useState0[0],\n      setIsPositioning = _useState0[1];\n    var _useState1 = (0, _react.useState)(null),\n      _useState10 = (0, _slicedToArray.default)(_useState1, 2),\n      positionError = _useState10[0],\n      setPositionError = _useState10[1];\n\n    // Navigation state\n    var _useState11 = (0, _react.useState)(null),\n      _useState12 = (0, _slicedToArray.default)(_useState11, 2),\n      navigationRoute = _useState12[0],\n      setNavigationRoute = _useState12[1];\n    var _useState13 = (0, _react.useState)(false),\n      _useState14 = (0, _slicedToArray.default)(_useState13, 2),\n      isNavigating = _useState14[0],\n      setIsNavigating = _useState14[1];\n\n    // Refs to track latest values in callbacks\n    var currentPositionRef = (0, _react.useRef)(null);\n    var rssiThresholdRef = (0, _react.useRef)(-75);\n    var setUserLocation = (0, _storeAppStore.useAppStore)(s => s.setUserLocation);\n    var setNavigationRouteStore = (0, _storeAppStore.useAppStore)(s => s.setNavigationRoute);\n\n    // Update ref when position changes\n    (0, _react.useEffect)(() => {\n      currentPositionRef.current = currentPosition;\n    }, [currentPosition]);\n\n    /**\n     * Handle incoming beacon data and compute position\n     */\n    var handleBeaconsFound = (0, _react.useCallback)(/*#__PURE__*/function () {\n      var _ref = (0, _asyncToGenerator.default)(function* (beacons) {\n        setScannedBeacons(beacons);\n        if (beacons.length === 0) {\n          return;\n        }\n        var strongest = beacons.reduce((best, current) => {\n          if (!best) return current;\n          var bestR = typeof best.avgRssi === 'number' ? best.avgRssi : best.rssi;\n          var curR = typeof current.avgRssi === 'number' ? current.avgRssi : current.rssi;\n          return curR > bestR ? current : best;\n        }, beacons[0]);\n        try {\n          setIsPositioning(true);\n          setPositionError(null);\n\n          // Use only the strongest beacon for a single-beacon lookup\n          var THRESHOLD = rssiThresholdRef.current ?? -75;\n          var rssiValue = Math.round(strongest.avgRssi ?? strongest.rssi);\n          if (typeof rssiValue !== 'number' || rssiValue < THRESHOLD) {\n            setPositionError(`No beacon with sufficient RSSI (threshold ${THRESHOLD} dBm)`);\n            return;\n          }\n\n          // Use UUID+Major+Minor as unique identifier (do not send MAC)\n          var uuid = strongest.uuid;\n          var major = strongest.major;\n          var minor = strongest.minor;\n          if (!uuid || typeof major !== 'number' || typeof minor !== 'number') {\n            setPositionError('Strongest beacon missing UUID/Major/Minor');\n            return;\n          }\n          var payload = [{\n            uuid,\n            major,\n            minor,\n            rssi: rssiValue\n          }];\n          console.log('[Positioning] sending strongest beacon payload:', payload);\n          var position = yield _servicesApi.positioningApi.computePosition(payload);\n          if (position.valid) {\n            setCurrentPosition(position);\n\n            // Update global store user location so IndoorMapViewer and other components react\n            try {\n              var userLoc = {\n                building_id: position.buildingId,\n                floor_id: position.floorId,\n                x: position.x,\n                y: position.y,\n                source: 'beacon',\n                timestamp: new Date()\n              };\n              setUserLocation(userLoc);\n            } catch (e) {\n              console.warn('[useBeaconScanner] Failed to set user location in store', e);\n            }\n            console.log(`[useBeaconScanner] Position (from strongest beacon): (${position.x.toFixed(1)}, ${position.y.toFixed(1)}) on ${position.floorName}`);\n          } else {\n            setPositionError(position.errorMessage || 'Position computation failed');\n          }\n        } catch (error) {\n          console.error('[useBeaconScanner] Position error:', error);\n          setPositionError(error instanceof Error ? error.message : 'Unknown error');\n        } finally {\n          setIsPositioning(false);\n        }\n      });\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }(), []);\n\n    /**\n     * Handle scanner status changes\n     */\n    var handleStatusChange = (0, _react.useCallback)(status => {\n      setScannerStatus(status);\n      setIsScanning(status.isScanning);\n    }, []);\n\n    /**\n     * Start beacon scanning\n     */\n    var startScanning = (0, _react.useCallback)(/*#__PURE__*/function () {\n      var _ref2 = (0, _asyncToGenerator.default)(function* (options) {\n        if (_reactNative.Platform.OS === 'web') {\n          console.log('[useBeaconScanner] BLE not available on web');\n          setScannerStatus({\n            isScanning: false,\n            bluetoothEnabled: false,\n            permissionsGranted: false,\n            error: 'BLE scanning requires a physical Android device'\n          });\n          return false;\n        }\n\n        // store the configured RSSI threshold so the handler uses the same value\n        rssiThresholdRef.current = options?.rssiThreshold ?? -75;\n        var success = yield _servicesBeaconScanner.beaconScanner.startScanning(handleBeaconsFound, handleStatusChange, options);\n        return success;\n      });\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }(), [handleBeaconsFound, handleStatusChange]);\n\n    /**\n     * Stop beacon scanning\n     */\n    var stopScanning = (0, _react.useCallback)(() => {\n      _servicesBeaconScanner.beaconScanner.stopScanning();\n      setIsScanning(false);\n      setScannedBeacons([]);\n    }, []);\n\n    /**\n     * Navigate to a destination\n     */\n    var navigateTo = (0, _react.useCallback)(/*#__PURE__*/function () {\n      var _ref3 = (0, _asyncToGenerator.default)(function* (destX, destY) {\n        var position = currentPositionRef.current;\n        if (!position || !position.valid) {\n          console.error('[useBeaconScanner] Cannot navigate: no current position');\n          return null;\n        }\n        try {\n          setIsNavigating(true);\n          var request = {\n            buildingId: position.buildingId,\n            floorId: position.floorId,\n            startX: position.x,\n            startY: position.y,\n            destX,\n            destY\n          };\n          var route = yield _servicesApi.navigationApi.computeRoute(request);\n          setNavigationRoute(route);\n          // persist route to global store so map reads it\n          try {\n            setNavigationRouteStore(route);\n          } catch (e) {\n            console.warn('[useBeaconScanner] Failed to set navigation route in store', e);\n          }\n          console.log(`[useBeaconScanner] Navigation route: ${route.route.length} points, ${route.totalDistance.toFixed(1)} units`);\n          return route;\n        } catch (error) {\n          console.error('[useBeaconScanner] Navigation error:', error);\n          return null;\n        } finally {\n          setIsNavigating(false);\n        }\n      });\n      return function (_x3, _x4) {\n        return _ref3.apply(this, arguments);\n      };\n    }(), []);\n\n    /**\n     * Clear navigation route\n     */\n    var clearNavigation = (0, _react.useCallback)(() => {\n      setNavigationRoute(null);\n    }, []);\n\n    /**\n     * Cleanup on unmount\n     */\n    (0, _react.useEffect)(() => {\n      return () => {\n        _servicesBeaconScanner.beaconScanner.stopScanning();\n      };\n    }, []);\n    return {\n      // Scanner state\n      isScanning,\n      scannerStatus,\n      scannedBeacons,\n      // Position state\n      currentPosition,\n      isPositioning,\n      positionError,\n      // Navigation state\n      navigationRoute,\n      isNavigating,\n      // Actions\n      startScanning,\n      stopScanning,\n      navigateTo,\n      clearNavigation\n    };\n  }\n  _s(useBeaconScanner, \"hCqfdza7zFvr7GW7HLM2ZNFpTxc=\", false, function () {\n    return [_storeAppStore.useAppStore, _storeAppStore.useAppStore];\n  });\n});","lineCount":280,"map":[[5,2,1,0],[6,0,2,0],[7,0,3,0],[8,0,4,0],[9,2,1,0,"Object"],[9,8,1,0],[9,9,1,0,"defineProperty"],[9,23,1,0],[9,24,1,0,"exports"],[9,31,1,0],[10,4,1,0,"value"],[10,9,1,0],[11,2,1,0],[12,2,1,0],[12,11,1,0,"_interopDefault"],[12,27,1,0,"e"],[12,28,1,0],[13,4,1,0],[13,11,1,0,"e"],[13,12,1,0],[13,16,1,0,"e"],[13,17,1,0],[13,18,1,0,"__esModule"],[13,28,1,0],[13,31,1,0,"e"],[13,32,1,0],[14,6,1,0,"default"],[14,13,1,0],[14,15,1,0,"e"],[15,4,1,0],[16,2,1,0],[17,2,46,0,"exports"],[17,9,46,0],[17,10,46,0,"useBeaconScanner"],[17,26,46,0],[17,29,46,0,"useBeaconScanner"],[17,45,46,0],[18,2,280,1],[18,6,280,1,"_babelRuntimeHelpersAsyncToGenerator"],[18,42,280,1],[18,45,280,1,"require"],[18,52,280,1],[18,53,280,1,"_dependencyMap"],[18,67,280,1],[19,2,280,1],[19,6,280,1,"_asyncToGenerator"],[19,23,280,1],[19,26,280,1,"_interopDefault"],[19,41,280,1],[19,42,280,1,"_babelRuntimeHelpersAsyncToGenerator"],[19,78,280,1],[20,2,280,1],[20,6,280,1,"_babelRuntimeHelpersSlicedToArray"],[20,39,280,1],[20,42,280,1,"require"],[20,49,280,1],[20,50,280,1,"_dependencyMap"],[20,64,280,1],[21,2,280,1],[21,6,280,1,"_slicedToArray"],[21,20,280,1],[21,23,280,1,"_interopDefault"],[21,38,280,1],[21,39,280,1,"_babelRuntimeHelpersSlicedToArray"],[21,72,280,1],[22,2,6,0],[22,6,6,0,"_react"],[22,12,6,0],[22,15,6,0,"require"],[22,22,6,0],[22,23,6,0,"_dependencyMap"],[22,37,6,0],[23,2,7,0],[23,6,7,0,"_reactNative"],[23,18,7,0],[23,21,7,0,"require"],[23,28,7,0],[23,29,7,0,"_dependencyMap"],[23,43,7,0],[24,2,8,0],[24,6,8,0,"_storeAppStore"],[24,20,8,0],[24,23,8,0,"require"],[24,30,8,0],[24,31,8,0,"_dependencyMap"],[24,45,8,0],[25,2,9,0],[25,6,9,0,"_servicesBeaconScanner"],[25,28,9,0],[25,31,9,0,"require"],[25,38,9,0],[25,39,9,0,"_dependencyMap"],[25,53,9,0],[26,2,15,0],[26,6,15,0,"_servicesApi"],[26,18,15,0],[26,21,15,0,"require"],[26,28,15,0],[26,29,15,0,"_dependencyMap"],[26,43,15,0],[27,2,46,7],[27,11,46,16,"useBeaconScanner"],[27,27,46,32,"useBeaconScanner"],[27,28,46,32],[27,30,46,59],[28,4,46,59,"_s"],[28,6,46,59],[29,4,47,2],[30,4,48,2],[30,8,48,2,"_useState"],[30,17,48,2],[30,20,48,38],[30,24,48,38,"useState"],[30,30,48,46],[30,31,48,46,"useState"],[30,39,48,46],[30,41,48,47],[30,46,48,52],[30,47,48,53],[31,6,48,53,"_useState2"],[31,16,48,53],[31,23,48,53,"_slicedToArray"],[31,37,48,53],[31,38,48,53,"default"],[31,45,48,53],[31,47,48,53,"_useState"],[31,56,48,53],[32,6,48,9,"isScanning"],[32,16,48,19],[32,19,48,19,"_useState2"],[32,29,48,19],[33,6,48,21,"setIsScanning"],[33,19,48,34],[33,22,48,34,"_useState2"],[33,32,48,34],[34,4,49,2],[34,8,49,2,"_useState3"],[34,18,49,2],[34,21,49,44],[34,25,49,44,"useState"],[34,31,49,52],[34,32,49,52,"useState"],[34,40,49,52],[34,42,49,74],[35,8,50,4,"isScanning"],[35,18,50,14],[35,20,50,16],[35,25,50,21],[36,8,51,4,"bluetoothEnabled"],[36,24,51,20],[36,26,51,22],[36,31,51,27],[37,8,52,4,"permissionsGranted"],[37,26,52,22],[37,28,52,24],[38,6,53,2],[38,7,53,3],[38,8,53,4],[39,6,53,4,"_useState4"],[39,16,53,4],[39,23,53,4,"_slicedToArray"],[39,37,53,4],[39,38,53,4,"default"],[39,45,53,4],[39,47,53,4,"_useState3"],[39,57,53,4],[40,6,49,9,"scannerStatus"],[40,19,49,22],[40,22,49,22,"_useState4"],[40,32,49,22],[41,6,49,24,"setScannerStatus"],[41,22,49,40],[41,25,49,40,"_useState4"],[41,35,49,40],[42,4,54,2],[42,8,54,2,"_useState5"],[42,18,54,2],[42,21,54,46],[42,25,54,46,"useState"],[42,31,54,54],[42,32,54,54,"useState"],[42,40,54,54],[42,42,54,72],[42,44,54,74],[42,45,54,75],[43,6,54,75,"_useState6"],[43,16,54,75],[43,23,54,75,"_slicedToArray"],[43,37,54,75],[43,38,54,75,"default"],[43,45,54,75],[43,47,54,75,"_useState5"],[43,57,54,75],[44,6,54,9,"scannedBeacons"],[44,20,54,23],[44,23,54,23,"_useState6"],[44,33,54,23],[45,6,54,25,"setScannedBeacons"],[45,23,54,42],[45,26,54,42,"_useState6"],[45,36,54,42],[47,4,56,2],[48,4,57,2],[48,8,57,2,"_useState7"],[48,18,57,2],[48,21,57,48],[48,25,57,48,"useState"],[48,31,57,56],[48,32,57,56,"useState"],[48,40,57,56],[48,42,57,82],[48,46,57,86],[48,47,57,87],[49,6,57,87,"_useState8"],[49,16,57,87],[49,23,57,87,"_slicedToArray"],[49,37,57,87],[49,38,57,87,"default"],[49,45,57,87],[49,47,57,87,"_useState7"],[49,57,57,87],[50,6,57,9,"currentPosition"],[50,21,57,24],[50,24,57,24,"_useState8"],[50,34,57,24],[51,6,57,26,"setCurrentPosition"],[51,24,57,44],[51,27,57,44,"_useState8"],[51,37,57,44],[52,4,58,2],[52,8,58,2,"_useState9"],[52,18,58,2],[52,21,58,44],[52,25,58,44,"useState"],[52,31,58,52],[52,32,58,52,"useState"],[52,40,58,52],[52,42,58,53],[52,47,58,58],[52,48,58,59],[53,6,58,59,"_useState0"],[53,16,58,59],[53,23,58,59,"_slicedToArray"],[53,37,58,59],[53,38,58,59,"default"],[53,45,58,59],[53,47,58,59,"_useState9"],[53,57,58,59],[54,6,58,9,"isPositioning"],[54,19,58,22],[54,22,58,22,"_useState0"],[54,32,58,22],[55,6,58,24,"setIsPositioning"],[55,22,58,40],[55,25,58,40,"_useState0"],[55,35,58,40],[56,4,59,2],[56,8,59,2,"_useState1"],[56,18,59,2],[56,21,59,44],[56,25,59,44,"useState"],[56,31,59,52],[56,32,59,52,"useState"],[56,40,59,52],[56,42,59,68],[56,46,59,72],[56,47,59,73],[57,6,59,73,"_useState10"],[57,17,59,73],[57,24,59,73,"_slicedToArray"],[57,38,59,73],[57,39,59,73,"default"],[57,46,59,73],[57,48,59,73,"_useState1"],[57,58,59,73],[58,6,59,9,"positionError"],[58,19,59,22],[58,22,59,22,"_useState10"],[58,33,59,22],[59,6,59,24,"setPositionError"],[59,22,59,40],[59,25,59,40,"_useState10"],[59,36,59,40],[61,4,61,2],[62,4,62,2],[62,8,62,2,"_useState11"],[62,19,62,2],[62,22,62,48],[62,26,62,48,"useState"],[62,32,62,56],[62,33,62,56,"useState"],[62,41,62,56],[62,43,62,84],[62,47,62,88],[62,48,62,89],[63,6,62,89,"_useState12"],[63,17,62,89],[63,24,62,89,"_slicedToArray"],[63,38,62,89],[63,39,62,89,"default"],[63,46,62,89],[63,48,62,89,"_useState11"],[63,59,62,89],[64,6,62,9,"navigationRoute"],[64,21,62,24],[64,24,62,24,"_useState12"],[64,35,62,24],[65,6,62,26,"setNavigationRoute"],[65,24,62,44],[65,27,62,44,"_useState12"],[65,38,62,44],[66,4,63,2],[66,8,63,2,"_useState13"],[66,19,63,2],[66,22,63,42],[66,26,63,42,"useState"],[66,32,63,50],[66,33,63,50,"useState"],[66,41,63,50],[66,43,63,51],[66,48,63,56],[66,49,63,57],[67,6,63,57,"_useState14"],[67,17,63,57],[67,24,63,57,"_slicedToArray"],[67,38,63,57],[67,39,63,57,"default"],[67,46,63,57],[67,48,63,57,"_useState13"],[67,59,63,57],[68,6,63,9,"isNavigating"],[68,18,63,21],[68,21,63,21,"_useState14"],[68,32,63,21],[69,6,63,23,"setIsNavigating"],[69,21,63,38],[69,24,63,38,"_useState14"],[69,35,63,38],[71,4,65,2],[72,4,66,2],[72,8,66,8,"currentPositionRef"],[72,26,66,26],[72,29,66,29],[72,33,66,29,"useRef"],[72,39,66,35],[72,40,66,35,"useRef"],[72,46,66,35],[72,48,66,61],[72,52,66,65],[72,53,66,66],[73,4,67,2],[73,8,67,8,"rssiThresholdRef"],[73,24,67,24],[73,27,67,27],[73,31,67,27,"useRef"],[73,37,67,33],[73,38,67,33,"useRef"],[73,44,67,33],[73,46,67,42],[73,47,67,43],[73,49,67,45],[73,50,67,46],[74,4,68,2],[74,8,68,8,"setUserLocation"],[74,23,68,23],[74,26,68,26],[74,30,68,26,"useAppStore"],[74,44,68,37],[74,45,68,37,"useAppStore"],[74,56,68,37],[74,58,68,39,"s"],[74,59,68,40],[74,63,68,45,"s"],[74,64,68,46],[74,65,68,47,"setUserLocation"],[74,80,68,62],[74,81,68,63],[75,4,69,2],[75,8,69,8,"setNavigationRouteStore"],[75,31,69,31],[75,34,69,34],[75,38,69,34,"useAppStore"],[75,52,69,45],[75,53,69,45,"useAppStore"],[75,64,69,45],[75,66,69,47,"s"],[75,67,69,48],[75,71,69,53,"s"],[75,72,69,54],[75,73,69,55,"setNavigationRoute"],[75,91,69,73],[75,92,69,74],[77,4,71,2],[78,4,72,2],[78,8,72,2,"useEffect"],[78,14,72,11],[78,15,72,11,"useEffect"],[78,24,72,11],[78,26,72,12],[78,32,72,18],[79,6,73,4,"currentPositionRef"],[79,24,73,22],[79,25,73,23,"current"],[79,32,73,30],[79,35,73,33,"currentPosition"],[79,50,73,48],[80,4,74,2],[80,5,74,3],[80,7,74,5],[80,8,74,6,"currentPosition"],[80,23,74,21],[80,24,74,22],[80,25,74,23],[82,4,76,2],[83,0,77,0],[84,0,78,0],[85,4,79,2],[85,8,79,8,"handleBeaconsFound"],[85,26,79,26],[85,29,79,29],[85,33,79,29,"useCallback"],[85,39,79,40],[85,40,79,40,"useCallback"],[85,51,79,40],[86,6,79,40],[86,10,79,40,"_ref"],[86,14,79,40],[86,21,79,40,"_asyncToGenerator"],[86,38,79,40],[86,39,79,40,"default"],[86,46,79,40],[86,48,79,41],[86,59,79,48,"beacons"],[86,66,79,72],[86,68,79,77],[87,8,80,4,"setScannedBeacons"],[87,25,80,21],[87,26,80,22,"beacons"],[87,33,80,29],[87,34,80,30],[88,8,82,4],[88,12,82,8,"beacons"],[88,19,82,15],[88,20,82,16,"length"],[88,26,82,22],[88,31,82,27],[88,32,82,28],[88,34,82,30],[89,10,83,6],[90,8,84,4],[91,8,86,4],[91,12,86,10,"strongest"],[91,21,86,19],[91,24,86,22,"beacons"],[91,31,86,29],[91,32,86,30,"reduce"],[91,38,86,36],[91,39,86,37],[91,40,86,38,"best"],[91,44,86,42],[91,46,86,44,"current"],[91,53,86,51],[91,58,86,56],[92,10,87,6],[92,14,87,10],[92,15,87,11,"best"],[92,19,87,15],[92,21,87,17],[92,28,87,24,"current"],[92,35,87,31],[93,10,88,6],[93,14,88,12,"bestR"],[93,19,88,17],[93,22,88,20],[93,29,88,27,"best"],[93,33,88,31],[93,34,88,32,"avgRssi"],[93,41,88,39],[93,46,88,44],[93,54,88,52],[93,57,88,55,"best"],[93,61,88,59],[93,62,88,60,"avgRssi"],[93,69,88,67],[93,72,88,70,"best"],[93,76,88,74],[93,77,88,75,"rssi"],[93,81,88,79],[94,10,89,6],[94,14,89,12,"curR"],[94,18,89,16],[94,21,89,19],[94,28,89,26,"current"],[94,35,89,33],[94,36,89,34,"avgRssi"],[94,43,89,41],[94,48,89,46],[94,56,89,54],[94,59,89,57,"current"],[94,66,89,64],[94,67,89,65,"avgRssi"],[94,74,89,72],[94,77,89,75,"current"],[94,84,89,82],[94,85,89,83,"rssi"],[94,89,89,87],[95,10,90,6],[95,17,90,13,"curR"],[95,21,90,17],[95,24,90,20,"bestR"],[95,29,90,25],[95,32,90,28,"current"],[95,39,90,35],[95,42,90,38,"best"],[95,46,90,42],[96,8,91,4],[96,9,91,5],[96,11,91,7,"beacons"],[96,18,91,14],[96,19,91,15],[96,20,91,16],[96,21,91,17],[96,22,91,18],[97,8,93,4],[97,12,93,8],[98,10,94,6,"setIsPositioning"],[98,26,94,22],[98,27,94,23],[98,31,94,27],[98,32,94,28],[99,10,95,6,"setPositionError"],[99,26,95,22],[99,27,95,23],[99,31,95,27],[99,32,95,28],[101,10,97,6],[102,10,98,6],[102,14,98,12,"THRESHOLD"],[102,23,98,21],[102,26,98,24,"rssiThresholdRef"],[102,42,98,40],[102,43,98,41,"current"],[102,50,98,48],[102,54,98,52],[102,55,98,53],[102,57,98,55],[103,10,99,6],[103,14,99,12,"rssiValue"],[103,23,99,21],[103,26,99,24,"Math"],[103,30,99,28],[103,31,99,29,"round"],[103,36,99,34],[103,37,99,36,"strongest"],[103,46,99,45],[103,47,99,46,"avgRssi"],[103,54,99,53],[103,58,99,57,"strongest"],[103,67,99,66],[103,68,99,67,"rssi"],[103,72,99,82],[103,73,99,83],[104,10,101,6],[104,14,101,10],[104,21,101,17,"rssiValue"],[104,30,101,26],[104,35,101,31],[104,43,101,39],[104,47,101,43,"rssiValue"],[104,56,101,52],[104,59,101,55,"THRESHOLD"],[104,68,101,64],[104,70,101,66],[105,12,102,8,"setPositionError"],[105,28,102,24],[105,29,102,25],[105,74,102,70,"THRESHOLD"],[105,83,102,79],[105,90,102,86],[105,91,102,87],[106,12,103,8],[107,10,104,6],[109,10,106,6],[110,10,107,6],[110,14,107,12,"uuid"],[110,18,107,16],[110,21,107,19,"strongest"],[110,30,107,28],[110,31,107,29,"uuid"],[110,35,107,33],[111,10,108,6],[111,14,108,12,"major"],[111,19,108,17],[111,22,108,20,"strongest"],[111,31,108,29],[111,32,108,30,"major"],[111,37,108,35],[112,10,109,6],[112,14,109,12,"minor"],[112,19,109,17],[112,22,109,20,"strongest"],[112,31,109,29],[112,32,109,30,"minor"],[112,37,109,35],[113,10,111,6],[113,14,111,10],[113,15,111,11,"uuid"],[113,19,111,15],[113,23,111,19],[113,30,111,26,"major"],[113,35,111,31],[113,40,111,36],[113,48,111,44],[113,52,111,48],[113,59,111,55,"minor"],[113,64,111,60],[113,69,111,65],[113,77,111,73],[113,79,111,75],[114,12,112,8,"setPositionError"],[114,28,112,24],[114,29,112,25],[114,72,112,68],[114,73,112,69],[115,12,113,8],[116,10,114,6],[117,10,116,6],[117,14,116,12,"payload"],[117,21,116,19],[117,24,116,22],[117,25,116,23],[118,12,117,8,"uuid"],[118,16,117,12],[119,12,118,8,"major"],[119,17,118,13],[120,12,119,8,"minor"],[120,17,119,13],[121,12,120,8,"rssi"],[121,16,120,12],[121,18,120,14,"rssiValue"],[122,10,121,6],[122,11,121,7],[122,12,121,8],[123,10,123,6,"console"],[123,17,123,13],[123,18,123,14,"log"],[123,21,123,17],[123,22,123,18],[123,71,123,67],[123,73,123,69,"payload"],[123,80,123,76],[123,81,123,77],[124,10,124,6],[124,14,124,12,"position"],[124,22,124,20],[124,31,124,29,"positioningApi"],[124,43,124,43],[124,44,124,43,"positioningApi"],[124,58,124,43],[124,59,124,44,"computePosition"],[124,74,124,59],[124,75,124,60,"payload"],[124,82,124,74],[124,83,124,75],[125,10,126,6],[125,14,126,10,"position"],[125,22,126,18],[125,23,126,19,"valid"],[125,28,126,24],[125,30,126,26],[126,12,127,8,"setCurrentPosition"],[126,30,127,26],[126,31,127,27,"position"],[126,39,127,35],[126,40,127,36],[128,12,129,8],[129,12,130,8],[129,16,130,12],[130,14,131,10],[130,18,131,16,"userLoc"],[130,25,131,37],[130,28,131,40],[131,16,132,12,"building_id"],[131,27,132,23],[131,29,132,25,"position"],[131,37,132,33],[131,38,132,34,"buildingId"],[131,48,132,44],[132,16,133,12,"floor_id"],[132,24,133,20],[132,26,133,22,"position"],[132,34,133,30],[132,35,133,31,"floorId"],[132,42,133,38],[133,16,134,12,"x"],[133,17,134,13],[133,19,134,15,"position"],[133,27,134,23],[133,28,134,24,"x"],[133,29,134,25],[134,16,135,12,"y"],[134,17,135,13],[134,19,135,15,"position"],[134,27,135,23],[134,28,135,24,"y"],[134,29,135,25],[135,16,136,12,"source"],[135,22,136,18],[135,24,136,20],[135,32,136,28],[136,16,137,12,"timestamp"],[136,25,137,21],[136,27,137,23],[136,31,137,27,"Date"],[136,35,137,31],[136,36,137,32],[137,14,138,10],[137,15,138,11],[138,14,139,10,"setUserLocation"],[138,29,139,25],[138,30,139,26,"userLoc"],[138,37,139,33],[138,38,139,34],[139,12,140,8],[139,13,140,9],[139,14,140,10],[139,21,140,17,"e"],[139,22,140,18],[139,24,140,20],[140,14,141,10,"console"],[140,21,141,17],[140,22,141,18,"warn"],[140,26,141,22],[140,27,141,23],[140,84,141,80],[140,86,141,82,"e"],[140,87,141,83],[140,88,141,84],[141,12,142,8],[142,12,144,8,"console"],[142,19,144,15],[142,20,144,16,"log"],[142,23,144,19],[142,24,144,20],[142,81,144,77,"position"],[142,89,144,85],[142,90,144,86,"x"],[142,91,144,87],[142,92,144,88,"toFixed"],[142,99,144,95],[142,100,144,96],[142,101,144,97],[142,102,144,98],[142,107,144,103,"position"],[142,115,144,111],[142,116,144,112,"y"],[142,117,144,113],[142,118,144,114,"toFixed"],[142,125,144,121],[142,126,144,122],[142,127,144,123],[142,128,144,124],[142,136,144,132,"position"],[142,144,144,140],[142,145,144,141,"floorName"],[142,154,144,150],[142,156,144,152],[142,157,144,153],[143,10,145,6],[143,11,145,7],[143,17,145,13],[144,12,146,8,"setPositionError"],[144,28,146,24],[144,29,146,25,"position"],[144,37,146,33],[144,38,146,34,"errorMessage"],[144,50,146,46],[144,54,146,50],[144,83,146,79],[144,84,146,80],[145,10,147,6],[146,8,148,4],[146,9,148,5],[146,10,148,6],[146,17,148,13,"error"],[146,22,148,18],[146,24,148,20],[147,10,149,6,"console"],[147,17,149,13],[147,18,149,14,"error"],[147,23,149,19],[147,24,149,20],[147,60,149,56],[147,62,149,58,"error"],[147,67,149,63],[147,68,149,64],[148,10,150,6,"setPositionError"],[148,26,150,22],[148,27,150,23,"error"],[148,32,150,28],[148,44,150,40,"Error"],[148,49,150,45],[148,52,150,48,"error"],[148,57,150,53],[148,58,150,54,"message"],[148,65,150,61],[148,68,150,64],[148,83,150,79],[148,84,150,80],[149,8,151,4],[149,9,151,5],[149,18,151,14],[150,10,152,6,"setIsPositioning"],[150,26,152,22],[150,27,152,23],[150,32,152,28],[150,33,152,29],[151,8,153,4],[152,6,154,2],[152,7,154,3],[153,6,154,3],[153,23,154,3,"_x"],[153,25,154,3],[154,8,154,3],[154,15,154,3,"_ref"],[154,19,154,3],[154,20,154,3,"apply"],[154,25,154,3],[154,32,154,3,"arguments"],[154,41,154,3],[155,6,154,3],[156,4,154,3],[156,9,154,5],[156,11,154,7],[156,12,154,8],[158,4,156,2],[159,0,157,0],[160,0,158,0],[161,4,159,2],[161,8,159,8,"handleStatusChange"],[161,26,159,26],[161,29,159,29],[161,33,159,29,"useCallback"],[161,39,159,40],[161,40,159,40,"useCallback"],[161,51,159,40],[161,53,159,42,"status"],[161,59,159,69],[161,63,159,74],[162,6,160,4,"setScannerStatus"],[162,22,160,20],[162,23,160,21,"status"],[162,29,160,27],[162,30,160,28],[163,6,161,4,"setIsScanning"],[163,19,161,17],[163,20,161,18,"status"],[163,26,161,24],[163,27,161,25,"isScanning"],[163,37,161,35],[163,38,161,36],[164,4,162,2],[164,5,162,3],[164,7,162,5],[164,9,162,7],[164,10,162,8],[166,4,164,2],[167,0,165,0],[168,0,166,0],[169,4,167,2],[169,8,167,8,"startScanning"],[169,21,167,21],[169,24,167,24],[169,28,167,24,"useCallback"],[169,34,167,35],[169,35,167,35,"useCallback"],[169,46,167,35],[170,6,167,35],[170,10,167,35,"_ref2"],[170,15,167,35],[170,22,167,35,"_asyncToGenerator"],[170,39,167,35],[170,40,167,35,"default"],[170,47,167,35],[170,49,167,36],[170,60,167,43,"options"],[170,67,167,73],[170,69,167,96],[171,8,168,4],[171,12,168,8,"Platform"],[171,24,168,16],[171,25,168,16,"Platform"],[171,33,168,16],[171,34,168,17,"OS"],[171,36,168,19],[171,41,168,24],[171,46,168,29],[171,48,168,31],[172,10,169,6,"console"],[172,17,169,13],[172,18,169,14,"log"],[172,21,169,17],[172,22,169,18],[172,67,169,63],[172,68,169,64],[173,10,170,6,"setScannerStatus"],[173,26,170,22],[173,27,170,23],[174,12,171,8,"isScanning"],[174,22,171,18],[174,24,171,20],[174,29,171,25],[175,12,172,8,"bluetoothEnabled"],[175,28,172,24],[175,30,172,26],[175,35,172,31],[176,12,173,8,"permissionsGranted"],[176,30,173,26],[176,32,173,28],[176,37,173,33],[177,12,174,8,"error"],[177,17,174,13],[177,19,174,15],[178,10,175,6],[178,11,175,7],[178,12,175,8],[179,10,176,6],[179,17,176,13],[179,22,176,18],[180,8,177,4],[182,8,179,4],[183,8,180,4,"rssiThresholdRef"],[183,24,180,20],[183,25,180,21,"current"],[183,32,180,28],[183,35,180,31,"options"],[183,42,180,38],[183,44,180,40,"rssiThreshold"],[183,57,180,53],[183,61,180,57],[183,62,180,58],[183,64,180,60],[184,8,182,4],[184,12,182,10,"success"],[184,19,182,17],[184,28,182,26,"beaconScanner"],[184,50,182,39],[184,51,182,39,"beaconScanner"],[184,64,182,39],[184,65,182,40,"startScanning"],[184,78,182,53],[184,79,183,6,"handleBeaconsFound"],[184,97,183,24],[184,99,184,6,"handleStatusChange"],[184,117,184,24],[184,119,185,6,"options"],[184,126,186,4],[184,127,186,5],[185,8,188,4],[185,15,188,11,"success"],[185,22,188,18],[186,6,189,2],[186,7,189,3],[187,6,189,3],[187,23,189,3,"_x2"],[187,26,189,3],[188,8,189,3],[188,15,189,3,"_ref2"],[188,20,189,3],[188,21,189,3,"apply"],[188,26,189,3],[188,33,189,3,"arguments"],[188,42,189,3],[189,6,189,3],[190,4,189,3],[190,9,189,5],[190,10,189,6,"handleBeaconsFound"],[190,28,189,24],[190,30,189,26,"handleStatusChange"],[190,48,189,44],[190,49,189,45],[190,50,189,46],[192,4,191,2],[193,0,192,0],[194,0,193,0],[195,4,194,2],[195,8,194,8,"stopScanning"],[195,20,194,20],[195,23,194,23],[195,27,194,23,"useCallback"],[195,33,194,34],[195,34,194,34,"useCallback"],[195,45,194,34],[195,47,194,35],[195,53,194,41],[196,6,195,4,"beaconScanner"],[196,28,195,17],[196,29,195,17,"beaconScanner"],[196,42,195,17],[196,43,195,18,"stopScanning"],[196,55,195,30],[196,56,195,31],[196,57,195,32],[197,6,196,4,"setIsScanning"],[197,19,196,17],[197,20,196,18],[197,25,196,23],[197,26,196,24],[198,6,197,4,"setScannedBeacons"],[198,23,197,21],[198,24,197,22],[198,26,197,24],[198,27,197,25],[199,4,198,2],[199,5,198,3],[199,7,198,5],[199,9,198,7],[199,10,198,8],[201,4,200,2],[202,0,201,0],[203,0,202,0],[204,4,203,2],[204,8,203,8,"navigateTo"],[204,18,203,18],[204,21,203,21],[204,25,203,21,"useCallback"],[204,31,203,32],[204,32,203,32,"useCallback"],[204,43,203,32],[205,6,203,32],[205,10,203,32,"_ref3"],[205,15,203,32],[205,22,203,32,"_asyncToGenerator"],[205,39,203,32],[205,40,203,32,"default"],[205,47,203,32],[205,49,203,33],[205,60,203,40,"destX"],[205,65,203,53],[205,67,203,55,"destY"],[205,72,203,68],[205,74,203,109],[206,8,204,4],[206,12,204,10,"position"],[206,20,204,18],[206,23,204,21,"currentPositionRef"],[206,41,204,39],[206,42,204,40,"current"],[206,49,204,47],[207,8,206,4],[207,12,206,8],[207,13,206,9,"position"],[207,21,206,17],[207,25,206,21],[207,26,206,22,"position"],[207,34,206,30],[207,35,206,31,"valid"],[207,40,206,36],[207,42,206,38],[208,10,207,6,"console"],[208,17,207,13],[208,18,207,14,"error"],[208,23,207,19],[208,24,207,20],[208,81,207,77],[208,82,207,78],[209,10,208,6],[209,17,208,13],[209,21,208,17],[210,8,209,4],[211,8,211,4],[211,12,211,8],[212,10,212,6,"setIsNavigating"],[212,25,212,21],[212,26,212,22],[212,30,212,26],[212,31,212,27],[213,10,214,6],[213,14,214,12,"request"],[213,21,214,38],[213,24,214,41],[214,12,215,8,"buildingId"],[214,22,215,18],[214,24,215,20,"position"],[214,32,215,28],[214,33,215,29,"buildingId"],[214,43,215,39],[215,12,216,8,"floorId"],[215,19,216,15],[215,21,216,17,"position"],[215,29,216,25],[215,30,216,26,"floorId"],[215,37,216,33],[216,12,217,8,"startX"],[216,18,217,14],[216,20,217,16,"position"],[216,28,217,24],[216,29,217,25,"x"],[216,30,217,26],[217,12,218,8,"startY"],[217,18,218,14],[217,20,218,16,"position"],[217,28,218,24],[217,29,218,25,"y"],[217,30,218,26],[218,12,219,8,"destX"],[218,17,219,13],[219,12,220,8,"destY"],[220,10,221,6],[220,11,221,7],[221,10,223,6],[221,14,223,12,"route"],[221,19,223,17],[221,28,223,26,"navigationApi"],[221,40,223,39],[221,41,223,39,"navigationApi"],[221,54,223,39],[221,55,223,40,"computeRoute"],[221,67,223,52],[221,68,223,53,"request"],[221,75,223,60],[221,76,223,61],[222,10,224,6,"setNavigationRoute"],[222,28,224,24],[222,29,224,25,"route"],[222,34,224,30],[222,35,224,31],[223,10,225,6],[224,10,226,6],[224,14,226,10],[225,12,227,8,"setNavigationRouteStore"],[225,35,227,31],[225,36,227,32,"route"],[225,41,227,37],[225,42,227,38],[226,10,228,6],[226,11,228,7],[226,12,228,8],[226,19,228,15,"e"],[226,20,228,16],[226,22,228,18],[227,12,229,8,"console"],[227,19,229,15],[227,20,229,16,"warn"],[227,24,229,20],[227,25,229,21],[227,85,229,81],[227,87,229,83,"e"],[227,88,229,84],[227,89,229,85],[228,10,230,6],[229,10,232,6,"console"],[229,17,232,13],[229,18,232,14,"log"],[229,21,232,17],[229,22,232,18],[229,62,232,58,"route"],[229,67,232,63],[229,68,232,64,"route"],[229,73,232,69],[229,74,232,70,"length"],[229,80,232,76],[229,92,232,88,"route"],[229,97,232,93],[229,98,232,94,"totalDistance"],[229,111,232,107],[229,112,232,108,"toFixed"],[229,119,232,115],[229,120,232,116],[229,121,232,117],[229,122,232,118],[229,130,232,126],[229,131,232,127],[230,10,234,6],[230,17,234,13,"route"],[230,22,234,18],[231,8,235,4],[231,9,235,5],[231,10,235,6],[231,17,235,13,"error"],[231,22,235,18],[231,24,235,20],[232,10,236,6,"console"],[232,17,236,13],[232,18,236,14,"error"],[232,23,236,19],[232,24,236,20],[232,62,236,58],[232,64,236,60,"error"],[232,69,236,65],[232,70,236,66],[233,10,237,6],[233,17,237,13],[233,21,237,17],[234,8,238,4],[234,9,238,5],[234,18,238,14],[235,10,239,6,"setIsNavigating"],[235,25,239,21],[235,26,239,22],[235,31,239,27],[235,32,239,28],[236,8,240,4],[237,6,241,2],[237,7,241,3],[238,6,241,3],[238,23,241,3,"_x3"],[238,26,241,3],[238,28,241,3,"_x4"],[238,31,241,3],[239,8,241,3],[239,15,241,3,"_ref3"],[239,20,241,3],[239,21,241,3,"apply"],[239,26,241,3],[239,33,241,3,"arguments"],[239,42,241,3],[240,6,241,3],[241,4,241,3],[241,9,241,5],[241,11,241,7],[241,12,241,8],[243,4,243,2],[244,0,244,0],[245,0,245,0],[246,4,246,2],[246,8,246,8,"clearNavigation"],[246,23,246,23],[246,26,246,26],[246,30,246,26,"useCallback"],[246,36,246,37],[246,37,246,37,"useCallback"],[246,48,246,37],[246,50,246,38],[246,56,246,44],[247,6,247,4,"setNavigationRoute"],[247,24,247,22],[247,25,247,23],[247,29,247,27],[247,30,247,28],[248,4,248,2],[248,5,248,3],[248,7,248,5],[248,9,248,7],[248,10,248,8],[250,4,250,2],[251,0,251,0],[252,0,252,0],[253,4,253,2],[253,8,253,2,"useEffect"],[253,14,253,11],[253,15,253,11,"useEffect"],[253,24,253,11],[253,26,253,12],[253,32,253,18],[254,6,254,4],[254,13,254,11],[254,19,254,17],[255,8,255,6,"beaconScanner"],[255,30,255,19],[255,31,255,19,"beaconScanner"],[255,44,255,19],[255,45,255,20,"stopScanning"],[255,57,255,32],[255,58,255,33],[255,59,255,34],[256,6,256,4],[256,7,256,5],[257,4,257,2],[257,5,257,3],[257,7,257,5],[257,9,257,7],[257,10,257,8],[258,4,259,2],[258,11,259,9],[259,6,260,4],[260,6,261,4,"isScanning"],[260,16,261,14],[261,6,262,4,"scannerStatus"],[261,19,262,17],[262,6,263,4,"scannedBeacons"],[262,20,263,18],[263,6,265,4],[264,6,266,4,"currentPosition"],[264,21,266,19],[265,6,267,4,"isPositioning"],[265,19,267,17],[266,6,268,4,"positionError"],[266,19,268,17],[267,6,270,4],[268,6,271,4,"navigationRoute"],[268,21,271,19],[269,6,272,4,"isNavigating"],[269,18,272,16],[270,6,274,4],[271,6,275,4,"startScanning"],[271,19,275,17],[272,6,276,4,"stopScanning"],[272,18,276,16],[273,6,277,4,"navigateTo"],[273,16,277,14],[274,6,278,4,"clearNavigation"],[275,4,279,2],[275,5,279,3],[276,2,280,0],[277,2,280,1,"_s"],[277,4,280,1],[277,5,46,16,"useBeaconScanner"],[277,21,46,32],[278,4,46,32],[278,12,68,26,"useAppStore"],[278,26,68,37],[278,27,68,37,"useAppStore"],[278,38,68,37],[278,40,69,34,"useAppStore"],[278,54,69,45],[278,55,69,45,"useAppStore"],[278,66,69,45],[279,2,69,45],[280,0,69,45],[280,3]],"functionMap":{"names":["<global>","useBeaconScanner","useAppStore$argument_0","useEffect$argument_0","handleBeaconsFound","beacons.reduce$argument_0","handleStatusChange","startScanning","stopScanning","navigateTo","clearNavigation","<anonymous>"],"mappings":"AAA;OC6C;sCCsB,wBD;8CCC,2BD;YEG;GFE;yCGK;qCCO;KDK;GH+D;yCKK;GLG;oCMK;GNsB;mCOK;GPI;iCQK;GRsC;sCSK;GTE;YEK;WQC;KRE;GFC;CDuB"},"hasCjsExports":false},"type":"js/module"}]}
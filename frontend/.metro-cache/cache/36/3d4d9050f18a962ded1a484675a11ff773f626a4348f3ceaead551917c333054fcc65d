{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":85},"end":{"line":6,"column":65,"index":150}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":151},"end":{"line":7,"column":40,"index":191}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}},{"name":"../store/appStore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":192},"end":{"line":8,"column":62,"index":254}}],"key":"/bohzyw2mCiLwBL1LhK3cj9dt4o=","exportNames":["*"],"imports":1}},{"name":"../services/beaconScanner","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":9,"column":0,"index":255},"end":{"line":14,"column":35,"index":379}}],"key":"BHEtprxFZbpJurUGq47L1Pm/D5Q=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":15,"column":0,"index":380},"end":{"line":21,"column":25,"index":511}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  /**\n   * useBeaconScanner Hook\n   * React hook for iBeacon scanning and positioning\n   */\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useBeaconScanner = useBeaconScanner;\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[2], \"react\");\n  var _reactNative = require(_dependencyMap[3], \"react-native\");\n  var _storeAppStore = require(_dependencyMap[4], \"../store/appStore\");\n  var _servicesBeaconScanner = require(_dependencyMap[5], \"../services/beaconScanner\");\n  var _servicesApi = require(_dependencyMap[6], \"../services/api\");\n  function useBeaconScanner() {\n    _s();\n    // Scanner state\n    var _useState = (0, _react.useState)(false),\n      _useState2 = (0, _slicedToArray.default)(_useState, 2),\n      isScanning = _useState2[0],\n      setIsScanning = _useState2[1];\n    var _useState3 = (0, _react.useState)({\n        isScanning: false,\n        bluetoothEnabled: false,\n        permissionsGranted: false\n      }),\n      _useState4 = (0, _slicedToArray.default)(_useState3, 2),\n      scannerStatus = _useState4[0],\n      setScannerStatus = _useState4[1];\n    var _useState5 = (0, _react.useState)([]),\n      _useState6 = (0, _slicedToArray.default)(_useState5, 2),\n      scannedBeacons = _useState6[0],\n      setScannedBeacons = _useState6[1];\n\n    // Position state\n    var _useState7 = (0, _react.useState)(null),\n      _useState8 = (0, _slicedToArray.default)(_useState7, 2),\n      currentPosition = _useState8[0],\n      setCurrentPosition = _useState8[1];\n    var _useState9 = (0, _react.useState)(false),\n      _useState0 = (0, _slicedToArray.default)(_useState9, 2),\n      isPositioning = _useState0[0],\n      setIsPositioning = _useState0[1];\n    var _useState1 = (0, _react.useState)(null),\n      _useState10 = (0, _slicedToArray.default)(_useState1, 2),\n      positionError = _useState10[0],\n      setPositionError = _useState10[1];\n\n    // Navigation state\n    var _useState11 = (0, _react.useState)(null),\n      _useState12 = (0, _slicedToArray.default)(_useState11, 2),\n      navigationRoute = _useState12[0],\n      setNavigationRoute = _useState12[1];\n    var _useState13 = (0, _react.useState)(false),\n      _useState14 = (0, _slicedToArray.default)(_useState13, 2),\n      isNavigating = _useState14[0],\n      setIsNavigating = _useState14[1];\n\n    // Refs to track latest values in callbacks\n    var currentPositionRef = (0, _react.useRef)(null);\n    var rssiThresholdRef = (0, _react.useRef)(-75);\n    var setUserLocation = (0, _storeAppStore.useAppStore)(s => s.setUserLocation);\n    var setNavigationRouteStore = (0, _storeAppStore.useAppStore)(s => s.setNavigationRoute);\n\n    // Update ref when position changes\n    (0, _react.useEffect)(() => {\n      currentPositionRef.current = currentPosition;\n    }, [currentPosition]);\n\n    /**\n     * Handle incoming beacon data and compute position\n     */\n    var handleBeaconsFound = (0, _react.useCallback)(/*#__PURE__*/function () {\n      var _ref = (0, _asyncToGenerator.default)(function* (beacons) {\n        setScannedBeacons(beacons);\n        if (beacons.length === 0) {\n          return;\n        }\n        var usable = beacons.filter(b => (b.avgRssi ?? b.rssi) >= (rssiThresholdRef.current ?? -75));\n        if (usable.length === 0) {\n          setPositionError(`No beacon with sufficient RSSI (threshold ${rssiThresholdRef.current ?? -75} dBm)`);\n          return;\n        }\n        var top = usable.slice().sort((a, b) => (b.avgRssi ?? b.rssi) - (a.avgRssi ?? a.rssi)).slice(0, 3);\n        try {\n          setIsPositioning(true);\n          setPositionError(null);\n\n          // Use only the strongest beacon for a single-beacon lookup\n          var payload = top.map(b => ({\n            uuid: b.uuid,\n            major: b.major,\n            minor: b.minor,\n            rssi: Math.round(b.avgRssi ?? b.rssi)\n          }));\n          console.log('[Positioning] sending top beacons payload:', payload);\n          var position = yield _servicesApi.positioningApi.computePosition(payload);\n          if (position.valid) {\n            setCurrentPosition(position);\n\n            // Update global store user location so IndoorMapViewer and other components react\n            try {\n              var userLoc = {\n                building_id: position.buildingId,\n                floor_id: position.floorId,\n                x: position.x,\n                y: position.y,\n                source: 'beacon',\n                timestamp: new Date()\n              };\n              setUserLocation(userLoc);\n            } catch (e) {\n              console.warn('[useBeaconScanner] Failed to set user location in store', e);\n            }\n            console.log(`[useBeaconScanner] Position (from strongest beacon): (${position.x.toFixed(1)}, ${position.y.toFixed(1)}) on ${position.floorName}`);\n          } else {\n            setPositionError(position.errorMessage || 'Position computation failed');\n          }\n        } catch (error) {\n          console.error('[useBeaconScanner] Position error:', error);\n          setPositionError(error instanceof Error ? error.message : 'Unknown error');\n        } finally {\n          setIsPositioning(false);\n        }\n      });\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }(), []);\n\n    /**\n     * Handle scanner status changes\n     */\n    var handleStatusChange = (0, _react.useCallback)(status => {\n      setScannerStatus(status);\n      setIsScanning(status.isScanning);\n    }, []);\n\n    /**\n     * Start beacon scanning\n     */\n    var startScanning = (0, _react.useCallback)(/*#__PURE__*/function () {\n      var _ref2 = (0, _asyncToGenerator.default)(function* (options) {\n        if (_reactNative.Platform.OS === 'web') {\n          console.log('[useBeaconScanner] BLE not available on web');\n          setScannerStatus({\n            isScanning: false,\n            bluetoothEnabled: false,\n            permissionsGranted: false,\n            error: 'BLE scanning requires a physical Android device'\n          });\n          return false;\n        }\n\n        // store the configured RSSI threshold so the handler uses the same value\n        rssiThresholdRef.current = options?.rssiThreshold ?? -75;\n        var success = yield _servicesBeaconScanner.beaconScanner.startScanning(handleBeaconsFound, handleStatusChange, options);\n        return success;\n      });\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }(), [handleBeaconsFound, handleStatusChange]);\n\n    /**\n     * Stop beacon scanning\n     */\n    var stopScanning = (0, _react.useCallback)(() => {\n      _servicesBeaconScanner.beaconScanner.stopScanning();\n      setIsScanning(false);\n      setScannedBeacons([]);\n    }, []);\n\n    /**\n     * Navigate to a destination\n     */\n    var navigateTo = (0, _react.useCallback)(/*#__PURE__*/function () {\n      var _ref3 = (0, _asyncToGenerator.default)(function* (destX, destY) {\n        var position = currentPositionRef.current;\n        if (!position || !position.valid) {\n          console.error('[useBeaconScanner] Cannot navigate: no current position');\n          return null;\n        }\n        try {\n          setIsNavigating(true);\n          var request = {\n            buildingId: position.buildingId,\n            floorId: position.floorId,\n            startX: position.x,\n            startY: position.y,\n            destX,\n            destY\n          };\n          var route = yield _servicesApi.navigationApi.computeRoute(request);\n          setNavigationRoute(route);\n          // persist route to global store so map reads it\n          try {\n            setNavigationRouteStore(route);\n          } catch (e) {\n            console.warn('[useBeaconScanner] Failed to set navigation route in store', e);\n          }\n          console.log(`[useBeaconScanner] Navigation route: ${route.route.length} points, ${route.totalDistance.toFixed(1)} units`);\n          return route;\n        } catch (error) {\n          console.error('[useBeaconScanner] Navigation error:', error);\n          return null;\n        } finally {\n          setIsNavigating(false);\n        }\n      });\n      return function (_x3, _x4) {\n        return _ref3.apply(this, arguments);\n      };\n    }(), []);\n\n    /**\n     * Clear navigation route\n     */\n    var clearNavigation = (0, _react.useCallback)(() => {\n      setNavigationRoute(null);\n    }, []);\n\n    /**\n     * Cleanup on unmount\n     */\n    (0, _react.useEffect)(() => {\n      return () => {\n        _servicesBeaconScanner.beaconScanner.stopScanning();\n      };\n    }, []);\n    return {\n      // Scanner state\n      isScanning,\n      scannerStatus,\n      scannedBeacons,\n      // Position state\n      currentPosition,\n      isPositioning,\n      positionError,\n      // Navigation state\n      navigationRoute,\n      isNavigating,\n      // Actions\n      startScanning,\n      stopScanning,\n      navigateTo,\n      clearNavigation\n    };\n  }\n  _s(useBeaconScanner, \"hCqfdza7zFvr7GW7HLM2ZNFpTxc=\", false, function () {\n    return [_storeAppStore.useAppStore, _storeAppStore.useAppStore];\n  });\n});","lineCount":265,"map":[[5,2,1,0],[6,0,2,0],[7,0,3,0],[8,0,4,0],[9,2,1,0,"Object"],[9,8,1,0],[9,9,1,0,"defineProperty"],[9,23,1,0],[9,24,1,0,"exports"],[9,31,1,0],[10,4,1,0,"value"],[10,9,1,0],[11,2,1,0],[12,2,1,0],[12,11,1,0,"_interopDefault"],[12,27,1,0,"e"],[12,28,1,0],[13,4,1,0],[13,11,1,0,"e"],[13,12,1,0],[13,16,1,0,"e"],[13,17,1,0],[13,18,1,0,"__esModule"],[13,28,1,0],[13,31,1,0,"e"],[13,32,1,0],[14,6,1,0,"default"],[14,13,1,0],[14,15,1,0,"e"],[15,4,1,0],[16,2,1,0],[17,2,46,0,"exports"],[17,9,46,0],[17,10,46,0,"useBeaconScanner"],[17,26,46,0],[17,29,46,0,"useBeaconScanner"],[17,45,46,0],[18,2,266,1],[18,6,266,1,"_babelRuntimeHelpersAsyncToGenerator"],[18,42,266,1],[18,45,266,1,"require"],[18,52,266,1],[18,53,266,1,"_dependencyMap"],[18,67,266,1],[19,2,266,1],[19,6,266,1,"_asyncToGenerator"],[19,23,266,1],[19,26,266,1,"_interopDefault"],[19,41,266,1],[19,42,266,1,"_babelRuntimeHelpersAsyncToGenerator"],[19,78,266,1],[20,2,266,1],[20,6,266,1,"_babelRuntimeHelpersSlicedToArray"],[20,39,266,1],[20,42,266,1,"require"],[20,49,266,1],[20,50,266,1,"_dependencyMap"],[20,64,266,1],[21,2,266,1],[21,6,266,1,"_slicedToArray"],[21,20,266,1],[21,23,266,1,"_interopDefault"],[21,38,266,1],[21,39,266,1,"_babelRuntimeHelpersSlicedToArray"],[21,72,266,1],[22,2,6,0],[22,6,6,0,"_react"],[22,12,6,0],[22,15,6,0,"require"],[22,22,6,0],[22,23,6,0,"_dependencyMap"],[22,37,6,0],[23,2,7,0],[23,6,7,0,"_reactNative"],[23,18,7,0],[23,21,7,0,"require"],[23,28,7,0],[23,29,7,0,"_dependencyMap"],[23,43,7,0],[24,2,8,0],[24,6,8,0,"_storeAppStore"],[24,20,8,0],[24,23,8,0,"require"],[24,30,8,0],[24,31,8,0,"_dependencyMap"],[24,45,8,0],[25,2,9,0],[25,6,9,0,"_servicesBeaconScanner"],[25,28,9,0],[25,31,9,0,"require"],[25,38,9,0],[25,39,9,0,"_dependencyMap"],[25,53,9,0],[26,2,15,0],[26,6,15,0,"_servicesApi"],[26,18,15,0],[26,21,15,0,"require"],[26,28,15,0],[26,29,15,0,"_dependencyMap"],[26,43,15,0],[27,2,46,7],[27,11,46,16,"useBeaconScanner"],[27,27,46,32,"useBeaconScanner"],[27,28,46,32],[27,30,46,59],[28,4,46,59,"_s"],[28,6,46,59],[29,4,47,2],[30,4,48,2],[30,8,48,2,"_useState"],[30,17,48,2],[30,20,48,38],[30,24,48,38,"useState"],[30,30,48,46],[30,31,48,46,"useState"],[30,39,48,46],[30,41,48,47],[30,46,48,52],[30,47,48,53],[31,6,48,53,"_useState2"],[31,16,48,53],[31,23,48,53,"_slicedToArray"],[31,37,48,53],[31,38,48,53,"default"],[31,45,48,53],[31,47,48,53,"_useState"],[31,56,48,53],[32,6,48,9,"isScanning"],[32,16,48,19],[32,19,48,19,"_useState2"],[32,29,48,19],[33,6,48,21,"setIsScanning"],[33,19,48,34],[33,22,48,34,"_useState2"],[33,32,48,34],[34,4,49,2],[34,8,49,2,"_useState3"],[34,18,49,2],[34,21,49,44],[34,25,49,44,"useState"],[34,31,49,52],[34,32,49,52,"useState"],[34,40,49,52],[34,42,49,74],[35,8,50,4,"isScanning"],[35,18,50,14],[35,20,50,16],[35,25,50,21],[36,8,51,4,"bluetoothEnabled"],[36,24,51,20],[36,26,51,22],[36,31,51,27],[37,8,52,4,"permissionsGranted"],[37,26,52,22],[37,28,52,24],[38,6,53,2],[38,7,53,3],[38,8,53,4],[39,6,53,4,"_useState4"],[39,16,53,4],[39,23,53,4,"_slicedToArray"],[39,37,53,4],[39,38,53,4,"default"],[39,45,53,4],[39,47,53,4,"_useState3"],[39,57,53,4],[40,6,49,9,"scannerStatus"],[40,19,49,22],[40,22,49,22,"_useState4"],[40,32,49,22],[41,6,49,24,"setScannerStatus"],[41,22,49,40],[41,25,49,40,"_useState4"],[41,35,49,40],[42,4,54,2],[42,8,54,2,"_useState5"],[42,18,54,2],[42,21,54,46],[42,25,54,46,"useState"],[42,31,54,54],[42,32,54,54,"useState"],[42,40,54,54],[42,42,54,72],[42,44,54,74],[42,45,54,75],[43,6,54,75,"_useState6"],[43,16,54,75],[43,23,54,75,"_slicedToArray"],[43,37,54,75],[43,38,54,75,"default"],[43,45,54,75],[43,47,54,75,"_useState5"],[43,57,54,75],[44,6,54,9,"scannedBeacons"],[44,20,54,23],[44,23,54,23,"_useState6"],[44,33,54,23],[45,6,54,25,"setScannedBeacons"],[45,23,54,42],[45,26,54,42,"_useState6"],[45,36,54,42],[47,4,56,2],[48,4,57,2],[48,8,57,2,"_useState7"],[48,18,57,2],[48,21,57,48],[48,25,57,48,"useState"],[48,31,57,56],[48,32,57,56,"useState"],[48,40,57,56],[48,42,57,82],[48,46,57,86],[48,47,57,87],[49,6,57,87,"_useState8"],[49,16,57,87],[49,23,57,87,"_slicedToArray"],[49,37,57,87],[49,38,57,87,"default"],[49,45,57,87],[49,47,57,87,"_useState7"],[49,57,57,87],[50,6,57,9,"currentPosition"],[50,21,57,24],[50,24,57,24,"_useState8"],[50,34,57,24],[51,6,57,26,"setCurrentPosition"],[51,24,57,44],[51,27,57,44,"_useState8"],[51,37,57,44],[52,4,58,2],[52,8,58,2,"_useState9"],[52,18,58,2],[52,21,58,44],[52,25,58,44,"useState"],[52,31,58,52],[52,32,58,52,"useState"],[52,40,58,52],[52,42,58,53],[52,47,58,58],[52,48,58,59],[53,6,58,59,"_useState0"],[53,16,58,59],[53,23,58,59,"_slicedToArray"],[53,37,58,59],[53,38,58,59,"default"],[53,45,58,59],[53,47,58,59,"_useState9"],[53,57,58,59],[54,6,58,9,"isPositioning"],[54,19,58,22],[54,22,58,22,"_useState0"],[54,32,58,22],[55,6,58,24,"setIsPositioning"],[55,22,58,40],[55,25,58,40,"_useState0"],[55,35,58,40],[56,4,59,2],[56,8,59,2,"_useState1"],[56,18,59,2],[56,21,59,44],[56,25,59,44,"useState"],[56,31,59,52],[56,32,59,52,"useState"],[56,40,59,52],[56,42,59,68],[56,46,59,72],[56,47,59,73],[57,6,59,73,"_useState10"],[57,17,59,73],[57,24,59,73,"_slicedToArray"],[57,38,59,73],[57,39,59,73,"default"],[57,46,59,73],[57,48,59,73,"_useState1"],[57,58,59,73],[58,6,59,9,"positionError"],[58,19,59,22],[58,22,59,22,"_useState10"],[58,33,59,22],[59,6,59,24,"setPositionError"],[59,22,59,40],[59,25,59,40,"_useState10"],[59,36,59,40],[61,4,61,2],[62,4,62,2],[62,8,62,2,"_useState11"],[62,19,62,2],[62,22,62,48],[62,26,62,48,"useState"],[62,32,62,56],[62,33,62,56,"useState"],[62,41,62,56],[62,43,62,84],[62,47,62,88],[62,48,62,89],[63,6,62,89,"_useState12"],[63,17,62,89],[63,24,62,89,"_slicedToArray"],[63,38,62,89],[63,39,62,89,"default"],[63,46,62,89],[63,48,62,89,"_useState11"],[63,59,62,89],[64,6,62,9,"navigationRoute"],[64,21,62,24],[64,24,62,24,"_useState12"],[64,35,62,24],[65,6,62,26,"setNavigationRoute"],[65,24,62,44],[65,27,62,44,"_useState12"],[65,38,62,44],[66,4,63,2],[66,8,63,2,"_useState13"],[66,19,63,2],[66,22,63,42],[66,26,63,42,"useState"],[66,32,63,50],[66,33,63,50,"useState"],[66,41,63,50],[66,43,63,51],[66,48,63,56],[66,49,63,57],[67,6,63,57,"_useState14"],[67,17,63,57],[67,24,63,57,"_slicedToArray"],[67,38,63,57],[67,39,63,57,"default"],[67,46,63,57],[67,48,63,57,"_useState13"],[67,59,63,57],[68,6,63,9,"isNavigating"],[68,18,63,21],[68,21,63,21,"_useState14"],[68,32,63,21],[69,6,63,23,"setIsNavigating"],[69,21,63,38],[69,24,63,38,"_useState14"],[69,35,63,38],[71,4,65,2],[72,4,66,2],[72,8,66,8,"currentPositionRef"],[72,26,66,26],[72,29,66,29],[72,33,66,29,"useRef"],[72,39,66,35],[72,40,66,35,"useRef"],[72,46,66,35],[72,48,66,61],[72,52,66,65],[72,53,66,66],[73,4,67,2],[73,8,67,8,"rssiThresholdRef"],[73,24,67,24],[73,27,67,27],[73,31,67,27,"useRef"],[73,37,67,33],[73,38,67,33,"useRef"],[73,44,67,33],[73,46,67,42],[73,47,67,43],[73,49,67,45],[73,50,67,46],[74,4,68,2],[74,8,68,8,"setUserLocation"],[74,23,68,23],[74,26,68,26],[74,30,68,26,"useAppStore"],[74,44,68,37],[74,45,68,37,"useAppStore"],[74,56,68,37],[74,58,68,39,"s"],[74,59,68,40],[74,63,68,45,"s"],[74,64,68,46],[74,65,68,47,"setUserLocation"],[74,80,68,62],[74,81,68,63],[75,4,69,2],[75,8,69,8,"setNavigationRouteStore"],[75,31,69,31],[75,34,69,34],[75,38,69,34,"useAppStore"],[75,52,69,45],[75,53,69,45,"useAppStore"],[75,64,69,45],[75,66,69,47,"s"],[75,67,69,48],[75,71,69,53,"s"],[75,72,69,54],[75,73,69,55,"setNavigationRoute"],[75,91,69,73],[75,92,69,74],[77,4,71,2],[78,4,72,2],[78,8,72,2,"useEffect"],[78,14,72,11],[78,15,72,11,"useEffect"],[78,24,72,11],[78,26,72,12],[78,32,72,18],[79,6,73,4,"currentPositionRef"],[79,24,73,22],[79,25,73,23,"current"],[79,32,73,30],[79,35,73,33,"currentPosition"],[79,50,73,48],[80,4,74,2],[80,5,74,3],[80,7,74,5],[80,8,74,6,"currentPosition"],[80,23,74,21],[80,24,74,22],[80,25,74,23],[82,4,76,2],[83,0,77,0],[84,0,78,0],[85,4,79,2],[85,8,79,8,"handleBeaconsFound"],[85,26,79,26],[85,29,79,29],[85,33,79,29,"useCallback"],[85,39,79,40],[85,40,79,40,"useCallback"],[85,51,79,40],[86,6,79,40],[86,10,79,40,"_ref"],[86,14,79,40],[86,21,79,40,"_asyncToGenerator"],[86,38,79,40],[86,39,79,40,"default"],[86,46,79,40],[86,48,79,41],[86,59,79,48,"beacons"],[86,66,79,72],[86,68,79,77],[87,8,80,4,"setScannedBeacons"],[87,25,80,21],[87,26,80,22,"beacons"],[87,33,80,29],[87,34,80,30],[88,8,82,4],[88,12,82,8,"beacons"],[88,19,82,15],[88,20,82,16,"length"],[88,26,82,22],[88,31,82,27],[88,32,82,28],[88,34,82,30],[89,10,83,6],[90,8,84,4],[91,8,86,4],[91,12,86,10,"usable"],[91,18,86,16],[91,21,86,19,"beacons"],[91,28,86,26],[91,29,86,27,"filter"],[91,35,86,33],[91,36,86,35,"b"],[91,37,86,36],[91,41,86,41],[91,42,86,42,"b"],[91,43,86,43],[91,44,86,44,"avgRssi"],[91,51,86,51],[91,55,86,55,"b"],[91,56,86,56],[91,57,86,57,"rssi"],[91,61,86,61],[91,67,86,67,"rssiThresholdRef"],[91,83,86,83],[91,84,86,84,"current"],[91,91,86,91],[91,95,86,95],[91,96,86,96],[91,98,86,98],[91,99,86,99],[91,100,86,100],[92,8,87,4],[92,12,87,8,"usable"],[92,18,87,14],[92,19,87,15,"length"],[92,25,87,21],[92,30,87,26],[92,31,87,27],[92,33,87,29],[93,10,88,6,"setPositionError"],[93,26,88,22],[93,27,88,23],[93,72,88,68,"rssiThresholdRef"],[93,88,88,84],[93,89,88,85,"current"],[93,96,88,92],[93,100,88,96],[93,101,88,97],[93,103,88,99],[93,110,88,106],[93,111,88,107],[94,10,89,6],[95,8,90,4],[96,8,92,4],[96,12,92,10,"top"],[96,15,92,13],[96,18,92,16,"usable"],[96,24,92,22],[96,25,93,7,"slice"],[96,30,93,12],[96,31,93,13],[96,32,93,14],[96,33,94,7,"sort"],[96,37,94,11],[96,38,94,12],[96,39,94,13,"a"],[96,40,94,14],[96,42,94,16,"b"],[96,43,94,17],[96,48,94,22],[96,49,94,23,"b"],[96,50,94,24],[96,51,94,25,"avgRssi"],[96,58,94,32],[96,62,94,36,"b"],[96,63,94,37],[96,64,94,38,"rssi"],[96,68,94,42],[96,73,94,47,"a"],[96,74,94,48],[96,75,94,49,"avgRssi"],[96,82,94,56],[96,86,94,60,"a"],[96,87,94,61],[96,88,94,62,"rssi"],[96,92,94,66],[96,93,94,67],[96,94,94,68],[96,95,95,7,"slice"],[96,100,95,12],[96,101,95,13],[96,102,95,14],[96,104,95,16],[96,105,95,17],[96,106,95,18],[97,8,97,4],[97,12,97,8],[98,10,98,6,"setIsPositioning"],[98,26,98,22],[98,27,98,23],[98,31,98,27],[98,32,98,28],[99,10,99,6,"setPositionError"],[99,26,99,22],[99,27,99,23],[99,31,99,27],[99,32,99,28],[101,10,101,6],[102,10,102,6],[102,14,102,12,"payload"],[102,21,102,19],[102,24,102,22,"top"],[102,27,102,25],[102,28,102,26,"map"],[102,31,102,29],[102,32,102,31,"b"],[102,33,102,32],[102,38,102,38],[103,12,103,8,"uuid"],[103,16,103,12],[103,18,103,14,"b"],[103,19,103,15],[103,20,103,16,"uuid"],[103,24,103,20],[104,12,104,8,"major"],[104,17,104,13],[104,19,104,15,"b"],[104,20,104,16],[104,21,104,17,"major"],[104,26,104,22],[105,12,105,8,"minor"],[105,17,105,13],[105,19,105,15,"b"],[105,20,105,16],[105,21,105,17,"minor"],[105,26,105,22],[106,12,106,8,"rssi"],[106,16,106,12],[106,18,106,14,"Math"],[106,22,106,18],[106,23,106,19,"round"],[106,28,106,24],[106,29,106,26,"b"],[106,30,106,27],[106,31,106,28,"avgRssi"],[106,38,106,35],[106,42,106,39,"b"],[106,43,106,40],[106,44,106,41,"rssi"],[106,48,106,56],[107,10,107,6],[107,11,107,7],[107,12,107,8],[107,13,107,9],[108,10,109,6,"console"],[108,17,109,13],[108,18,109,14,"log"],[108,21,109,17],[108,22,109,18],[108,66,109,62],[108,68,109,64,"payload"],[108,75,109,71],[108,76,109,72],[109,10,110,6],[109,14,110,12,"position"],[109,22,110,20],[109,31,110,29,"positioningApi"],[109,43,110,43],[109,44,110,43,"positioningApi"],[109,58,110,43],[109,59,110,44,"computePosition"],[109,74,110,59],[109,75,110,60,"payload"],[109,82,110,74],[109,83,110,75],[110,10,112,6],[110,14,112,10,"position"],[110,22,112,18],[110,23,112,19,"valid"],[110,28,112,24],[110,30,112,26],[111,12,113,8,"setCurrentPosition"],[111,30,113,26],[111,31,113,27,"position"],[111,39,113,35],[111,40,113,36],[113,12,115,8],[114,12,116,8],[114,16,116,12],[115,14,117,10],[115,18,117,16,"userLoc"],[115,25,117,37],[115,28,117,40],[116,16,118,12,"building_id"],[116,27,118,23],[116,29,118,25,"position"],[116,37,118,33],[116,38,118,34,"buildingId"],[116,48,118,44],[117,16,119,12,"floor_id"],[117,24,119,20],[117,26,119,22,"position"],[117,34,119,30],[117,35,119,31,"floorId"],[117,42,119,38],[118,16,120,12,"x"],[118,17,120,13],[118,19,120,15,"position"],[118,27,120,23],[118,28,120,24,"x"],[118,29,120,25],[119,16,121,12,"y"],[119,17,121,13],[119,19,121,15,"position"],[119,27,121,23],[119,28,121,24,"y"],[119,29,121,25],[120,16,122,12,"source"],[120,22,122,18],[120,24,122,20],[120,32,122,28],[121,16,123,12,"timestamp"],[121,25,123,21],[121,27,123,23],[121,31,123,27,"Date"],[121,35,123,31],[121,36,123,32],[122,14,124,10],[122,15,124,11],[123,14,125,10,"setUserLocation"],[123,29,125,25],[123,30,125,26,"userLoc"],[123,37,125,33],[123,38,125,34],[124,12,126,8],[124,13,126,9],[124,14,126,10],[124,21,126,17,"e"],[124,22,126,18],[124,24,126,20],[125,14,127,10,"console"],[125,21,127,17],[125,22,127,18,"warn"],[125,26,127,22],[125,27,127,23],[125,84,127,80],[125,86,127,82,"e"],[125,87,127,83],[125,88,127,84],[126,12,128,8],[127,12,130,8,"console"],[127,19,130,15],[127,20,130,16,"log"],[127,23,130,19],[127,24,130,20],[127,81,130,77,"position"],[127,89,130,85],[127,90,130,86,"x"],[127,91,130,87],[127,92,130,88,"toFixed"],[127,99,130,95],[127,100,130,96],[127,101,130,97],[127,102,130,98],[127,107,130,103,"position"],[127,115,130,111],[127,116,130,112,"y"],[127,117,130,113],[127,118,130,114,"toFixed"],[127,125,130,121],[127,126,130,122],[127,127,130,123],[127,128,130,124],[127,136,130,132,"position"],[127,144,130,140],[127,145,130,141,"floorName"],[127,154,130,150],[127,156,130,152],[127,157,130,153],[128,10,131,6],[128,11,131,7],[128,17,131,13],[129,12,132,8,"setPositionError"],[129,28,132,24],[129,29,132,25,"position"],[129,37,132,33],[129,38,132,34,"errorMessage"],[129,50,132,46],[129,54,132,50],[129,83,132,79],[129,84,132,80],[130,10,133,6],[131,8,134,4],[131,9,134,5],[131,10,134,6],[131,17,134,13,"error"],[131,22,134,18],[131,24,134,20],[132,10,135,6,"console"],[132,17,135,13],[132,18,135,14,"error"],[132,23,135,19],[132,24,135,20],[132,60,135,56],[132,62,135,58,"error"],[132,67,135,63],[132,68,135,64],[133,10,136,6,"setPositionError"],[133,26,136,22],[133,27,136,23,"error"],[133,32,136,28],[133,44,136,40,"Error"],[133,49,136,45],[133,52,136,48,"error"],[133,57,136,53],[133,58,136,54,"message"],[133,65,136,61],[133,68,136,64],[133,83,136,79],[133,84,136,80],[134,8,137,4],[134,9,137,5],[134,18,137,14],[135,10,138,6,"setIsPositioning"],[135,26,138,22],[135,27,138,23],[135,32,138,28],[135,33,138,29],[136,8,139,4],[137,6,140,2],[137,7,140,3],[138,6,140,3],[138,23,140,3,"_x"],[138,25,140,3],[139,8,140,3],[139,15,140,3,"_ref"],[139,19,140,3],[139,20,140,3,"apply"],[139,25,140,3],[139,32,140,3,"arguments"],[139,41,140,3],[140,6,140,3],[141,4,140,3],[141,9,140,5],[141,11,140,7],[141,12,140,8],[143,4,142,2],[144,0,143,0],[145,0,144,0],[146,4,145,2],[146,8,145,8,"handleStatusChange"],[146,26,145,26],[146,29,145,29],[146,33,145,29,"useCallback"],[146,39,145,40],[146,40,145,40,"useCallback"],[146,51,145,40],[146,53,145,42,"status"],[146,59,145,69],[146,63,145,74],[147,6,146,4,"setScannerStatus"],[147,22,146,20],[147,23,146,21,"status"],[147,29,146,27],[147,30,146,28],[148,6,147,4,"setIsScanning"],[148,19,147,17],[148,20,147,18,"status"],[148,26,147,24],[148,27,147,25,"isScanning"],[148,37,147,35],[148,38,147,36],[149,4,148,2],[149,5,148,3],[149,7,148,5],[149,9,148,7],[149,10,148,8],[151,4,150,2],[152,0,151,0],[153,0,152,0],[154,4,153,2],[154,8,153,8,"startScanning"],[154,21,153,21],[154,24,153,24],[154,28,153,24,"useCallback"],[154,34,153,35],[154,35,153,35,"useCallback"],[154,46,153,35],[155,6,153,35],[155,10,153,35,"_ref2"],[155,15,153,35],[155,22,153,35,"_asyncToGenerator"],[155,39,153,35],[155,40,153,35,"default"],[155,47,153,35],[155,49,153,36],[155,60,153,43,"options"],[155,67,153,73],[155,69,153,96],[156,8,154,4],[156,12,154,8,"Platform"],[156,24,154,16],[156,25,154,16,"Platform"],[156,33,154,16],[156,34,154,17,"OS"],[156,36,154,19],[156,41,154,24],[156,46,154,29],[156,48,154,31],[157,10,155,6,"console"],[157,17,155,13],[157,18,155,14,"log"],[157,21,155,17],[157,22,155,18],[157,67,155,63],[157,68,155,64],[158,10,156,6,"setScannerStatus"],[158,26,156,22],[158,27,156,23],[159,12,157,8,"isScanning"],[159,22,157,18],[159,24,157,20],[159,29,157,25],[160,12,158,8,"bluetoothEnabled"],[160,28,158,24],[160,30,158,26],[160,35,158,31],[161,12,159,8,"permissionsGranted"],[161,30,159,26],[161,32,159,28],[161,37,159,33],[162,12,160,8,"error"],[162,17,160,13],[162,19,160,15],[163,10,161,6],[163,11,161,7],[163,12,161,8],[164,10,162,6],[164,17,162,13],[164,22,162,18],[165,8,163,4],[167,8,165,4],[168,8,166,4,"rssiThresholdRef"],[168,24,166,20],[168,25,166,21,"current"],[168,32,166,28],[168,35,166,31,"options"],[168,42,166,38],[168,44,166,40,"rssiThreshold"],[168,57,166,53],[168,61,166,57],[168,62,166,58],[168,64,166,60],[169,8,168,4],[169,12,168,10,"success"],[169,19,168,17],[169,28,168,26,"beaconScanner"],[169,50,168,39],[169,51,168,39,"beaconScanner"],[169,64,168,39],[169,65,168,40,"startScanning"],[169,78,168,53],[169,79,169,6,"handleBeaconsFound"],[169,97,169,24],[169,99,170,6,"handleStatusChange"],[169,117,170,24],[169,119,171,6,"options"],[169,126,172,4],[169,127,172,5],[170,8,174,4],[170,15,174,11,"success"],[170,22,174,18],[171,6,175,2],[171,7,175,3],[172,6,175,3],[172,23,175,3,"_x2"],[172,26,175,3],[173,8,175,3],[173,15,175,3,"_ref2"],[173,20,175,3],[173,21,175,3,"apply"],[173,26,175,3],[173,33,175,3,"arguments"],[173,42,175,3],[174,6,175,3],[175,4,175,3],[175,9,175,5],[175,10,175,6,"handleBeaconsFound"],[175,28,175,24],[175,30,175,26,"handleStatusChange"],[175,48,175,44],[175,49,175,45],[175,50,175,46],[177,4,177,2],[178,0,178,0],[179,0,179,0],[180,4,180,2],[180,8,180,8,"stopScanning"],[180,20,180,20],[180,23,180,23],[180,27,180,23,"useCallback"],[180,33,180,34],[180,34,180,34,"useCallback"],[180,45,180,34],[180,47,180,35],[180,53,180,41],[181,6,181,4,"beaconScanner"],[181,28,181,17],[181,29,181,17,"beaconScanner"],[181,42,181,17],[181,43,181,18,"stopScanning"],[181,55,181,30],[181,56,181,31],[181,57,181,32],[182,6,182,4,"setIsScanning"],[182,19,182,17],[182,20,182,18],[182,25,182,23],[182,26,182,24],[183,6,183,4,"setScannedBeacons"],[183,23,183,21],[183,24,183,22],[183,26,183,24],[183,27,183,25],[184,4,184,2],[184,5,184,3],[184,7,184,5],[184,9,184,7],[184,10,184,8],[186,4,186,2],[187,0,187,0],[188,0,188,0],[189,4,189,2],[189,8,189,8,"navigateTo"],[189,18,189,18],[189,21,189,21],[189,25,189,21,"useCallback"],[189,31,189,32],[189,32,189,32,"useCallback"],[189,43,189,32],[190,6,189,32],[190,10,189,32,"_ref3"],[190,15,189,32],[190,22,189,32,"_asyncToGenerator"],[190,39,189,32],[190,40,189,32,"default"],[190,47,189,32],[190,49,189,33],[190,60,189,40,"destX"],[190,65,189,53],[190,67,189,55,"destY"],[190,72,189,68],[190,74,189,109],[191,8,190,4],[191,12,190,10,"position"],[191,20,190,18],[191,23,190,21,"currentPositionRef"],[191,41,190,39],[191,42,190,40,"current"],[191,49,190,47],[192,8,192,4],[192,12,192,8],[192,13,192,9,"position"],[192,21,192,17],[192,25,192,21],[192,26,192,22,"position"],[192,34,192,30],[192,35,192,31,"valid"],[192,40,192,36],[192,42,192,38],[193,10,193,6,"console"],[193,17,193,13],[193,18,193,14,"error"],[193,23,193,19],[193,24,193,20],[193,81,193,77],[193,82,193,78],[194,10,194,6],[194,17,194,13],[194,21,194,17],[195,8,195,4],[196,8,197,4],[196,12,197,8],[197,10,198,6,"setIsNavigating"],[197,25,198,21],[197,26,198,22],[197,30,198,26],[197,31,198,27],[198,10,200,6],[198,14,200,12,"request"],[198,21,200,38],[198,24,200,41],[199,12,201,8,"buildingId"],[199,22,201,18],[199,24,201,20,"position"],[199,32,201,28],[199,33,201,29,"buildingId"],[199,43,201,39],[200,12,202,8,"floorId"],[200,19,202,15],[200,21,202,17,"position"],[200,29,202,25],[200,30,202,26,"floorId"],[200,37,202,33],[201,12,203,8,"startX"],[201,18,203,14],[201,20,203,16,"position"],[201,28,203,24],[201,29,203,25,"x"],[201,30,203,26],[202,12,204,8,"startY"],[202,18,204,14],[202,20,204,16,"position"],[202,28,204,24],[202,29,204,25,"y"],[202,30,204,26],[203,12,205,8,"destX"],[203,17,205,13],[204,12,206,8,"destY"],[205,10,207,6],[205,11,207,7],[206,10,209,6],[206,14,209,12,"route"],[206,19,209,17],[206,28,209,26,"navigationApi"],[206,40,209,39],[206,41,209,39,"navigationApi"],[206,54,209,39],[206,55,209,40,"computeRoute"],[206,67,209,52],[206,68,209,53,"request"],[206,75,209,60],[206,76,209,61],[207,10,210,6,"setNavigationRoute"],[207,28,210,24],[207,29,210,25,"route"],[207,34,210,30],[207,35,210,31],[208,10,211,6],[209,10,212,6],[209,14,212,10],[210,12,213,8,"setNavigationRouteStore"],[210,35,213,31],[210,36,213,32,"route"],[210,41,213,37],[210,42,213,38],[211,10,214,6],[211,11,214,7],[211,12,214,8],[211,19,214,15,"e"],[211,20,214,16],[211,22,214,18],[212,12,215,8,"console"],[212,19,215,15],[212,20,215,16,"warn"],[212,24,215,20],[212,25,215,21],[212,85,215,81],[212,87,215,83,"e"],[212,88,215,84],[212,89,215,85],[213,10,216,6],[214,10,218,6,"console"],[214,17,218,13],[214,18,218,14,"log"],[214,21,218,17],[214,22,218,18],[214,62,218,58,"route"],[214,67,218,63],[214,68,218,64,"route"],[214,73,218,69],[214,74,218,70,"length"],[214,80,218,76],[214,92,218,88,"route"],[214,97,218,93],[214,98,218,94,"totalDistance"],[214,111,218,107],[214,112,218,108,"toFixed"],[214,119,218,115],[214,120,218,116],[214,121,218,117],[214,122,218,118],[214,130,218,126],[214,131,218,127],[215,10,220,6],[215,17,220,13,"route"],[215,22,220,18],[216,8,221,4],[216,9,221,5],[216,10,221,6],[216,17,221,13,"error"],[216,22,221,18],[216,24,221,20],[217,10,222,6,"console"],[217,17,222,13],[217,18,222,14,"error"],[217,23,222,19],[217,24,222,20],[217,62,222,58],[217,64,222,60,"error"],[217,69,222,65],[217,70,222,66],[218,10,223,6],[218,17,223,13],[218,21,223,17],[219,8,224,4],[219,9,224,5],[219,18,224,14],[220,10,225,6,"setIsNavigating"],[220,25,225,21],[220,26,225,22],[220,31,225,27],[220,32,225,28],[221,8,226,4],[222,6,227,2],[222,7,227,3],[223,6,227,3],[223,23,227,3,"_x3"],[223,26,227,3],[223,28,227,3,"_x4"],[223,31,227,3],[224,8,227,3],[224,15,227,3,"_ref3"],[224,20,227,3],[224,21,227,3,"apply"],[224,26,227,3],[224,33,227,3,"arguments"],[224,42,227,3],[225,6,227,3],[226,4,227,3],[226,9,227,5],[226,11,227,7],[226,12,227,8],[228,4,229,2],[229,0,230,0],[230,0,231,0],[231,4,232,2],[231,8,232,8,"clearNavigation"],[231,23,232,23],[231,26,232,26],[231,30,232,26,"useCallback"],[231,36,232,37],[231,37,232,37,"useCallback"],[231,48,232,37],[231,50,232,38],[231,56,232,44],[232,6,233,4,"setNavigationRoute"],[232,24,233,22],[232,25,233,23],[232,29,233,27],[232,30,233,28],[233,4,234,2],[233,5,234,3],[233,7,234,5],[233,9,234,7],[233,10,234,8],[235,4,236,2],[236,0,237,0],[237,0,238,0],[238,4,239,2],[238,8,239,2,"useEffect"],[238,14,239,11],[238,15,239,11,"useEffect"],[238,24,239,11],[238,26,239,12],[238,32,239,18],[239,6,240,4],[239,13,240,11],[239,19,240,17],[240,8,241,6,"beaconScanner"],[240,30,241,19],[240,31,241,19,"beaconScanner"],[240,44,241,19],[240,45,241,20,"stopScanning"],[240,57,241,32],[240,58,241,33],[240,59,241,34],[241,6,242,4],[241,7,242,5],[242,4,243,2],[242,5,243,3],[242,7,243,5],[242,9,243,7],[242,10,243,8],[243,4,245,2],[243,11,245,9],[244,6,246,4],[245,6,247,4,"isScanning"],[245,16,247,14],[246,6,248,4,"scannerStatus"],[246,19,248,17],[247,6,249,4,"scannedBeacons"],[247,20,249,18],[248,6,251,4],[249,6,252,4,"currentPosition"],[249,21,252,19],[250,6,253,4,"isPositioning"],[250,19,253,17],[251,6,254,4,"positionError"],[251,19,254,17],[252,6,256,4],[253,6,257,4,"navigationRoute"],[253,21,257,19],[254,6,258,4,"isNavigating"],[254,18,258,16],[255,6,260,4],[256,6,261,4,"startScanning"],[256,19,261,17],[257,6,262,4,"stopScanning"],[257,18,262,16],[258,6,263,4,"navigateTo"],[258,16,263,14],[259,6,264,4,"clearNavigation"],[260,4,265,2],[260,5,265,3],[261,2,266,0],[262,2,266,1,"_s"],[262,4,266,1],[262,5,46,16,"useBeaconScanner"],[262,21,46,32],[263,4,46,32],[263,12,68,26,"useAppStore"],[263,26,68,37],[263,27,68,37,"useAppStore"],[263,38,68,37],[263,40,69,34,"useAppStore"],[263,54,69,45],[263,55,69,45,"useAppStore"],[263,66,69,45],[264,2,69,45],[265,0,69,45],[265,3]],"functionMap":{"names":["<global>","useBeaconScanner","useAppStore$argument_0","useEffect$argument_0","handleBeaconsFound","beacons.filter$argument_0","usable.slice.sort$argument_0","top.map$argument_0","handleStatusChange","startScanning","stopScanning","navigateTo","clearNavigation","<anonymous>"],"mappings":"AAA;OC6C;sCCsB,wBD;8CCC,2BD;YEG;GFE;yCGK;kCCO,iED;YEQ,uDF;8BGQ;QHK;GHiC;yCOK;GPG;oCQK;GRsB;mCSK;GTI;iCUK;GVsC;sCWK;GXE;YEK;WUC;KVE;GFC;CDuB"},"hasCjsExports":false},"type":"js/module"}]}
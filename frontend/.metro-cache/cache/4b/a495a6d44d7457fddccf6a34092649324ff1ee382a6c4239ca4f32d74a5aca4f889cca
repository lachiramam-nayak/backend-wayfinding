{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"getTurnInstruction\", {\n    enumerable: true,\n    get: function () {\n      return getTurnInstruction;\n    }\n  });\n  var TURN_RADIUS = 40;\n  var distance = (ax, ay, bx, by) => {\n    var dx = ax - bx;\n    var dy = ay - by;\n    return Math.sqrt(dx * dx + dy * dy);\n  };\n  var getTurnInstruction = (userLocation, route) => {\n    if (!userLocation || !route || route.length < 2) return null;\n    var closestIndex = -1;\n    var closestDist = Number.POSITIVE_INFINITY;\n    for (var i = 1; i < route.length; i += 1) {\n      var p = route[i];\n      var d = distance(userLocation.x, userLocation.y, p.x, p.y);\n      if (d < closestDist) {\n        closestDist = d;\n        closestIndex = i;\n      }\n    }\n    if (closestDist > TURN_RADIUS || closestIndex < 0) return null;\n    if (closestIndex === route.length - 1) {\n      return 'You have arrived';\n    }\n    if (closestIndex === 0 || closestIndex >= route.length - 1) {\n      return null;\n    }\n    var prev = route[closestIndex - 1];\n    var curr = route[closestIndex];\n    var next = route[closestIndex + 1];\n    var v1x = curr.x - prev.x;\n    var v1y = curr.y - prev.y;\n    var v2x = next.x - curr.x;\n    var v2y = next.y - curr.y;\n    var dot = v1x * v2x + v1y * v2y;\n    var mag1 = Math.sqrt(v1x * v1x + v1y * v1y);\n    var mag2 = Math.sqrt(v2x * v2x + v2y * v2y);\n    if (mag1 === 0 || mag2 === 0) return null;\n    var angle = Math.acos(Math.max(-1, Math.min(1, dot / (mag1 * mag2)))) * (180 / Math.PI);\n    var distanceLabel = Math.max(1, Math.round(closestDist));\n    if (angle < 20) return `In ${distanceLabel} m, continue straight`;\n    var cross = v1x * v2y - v1y * v2x;\n    return cross > 0 ? `In ${distanceLabel} m, turn right` : `In ${distanceLabel} m, turn left`;\n  };\n});","lineCount":55,"map":[[7,2,11,0,"Object"],[7,8,11,0],[7,9,11,0,"defineProperty"],[7,23,11,0],[7,24,11,0,"exports"],[7,31,11,0],[8,4,11,0,"enumerable"],[8,14,11,0],[9,4,11,0,"get"],[9,7,11,0],[9,18,11,0,"get"],[9,19,11,0],[10,6,11,0],[10,13,11,0,"getTurnInstruction"],[10,31,11,0],[11,4,11,0],[12,2,11,0],[13,2,3,0],[13,6,3,6,"TURN_RADIUS"],[13,17,3,17],[13,20,3,20],[13,22,3,22],[14,2,5,0],[14,6,5,6,"distance"],[14,14,5,14],[14,17,5,17,"distance"],[14,18,5,18,"ax"],[14,20,5,28],[14,22,5,30,"ay"],[14,24,5,40],[14,26,5,42,"bx"],[14,28,5,52],[14,30,5,54,"by"],[14,32,5,64],[14,37,5,69],[15,4,6,2],[15,8,6,8,"dx"],[15,10,6,10],[15,13,6,13,"ax"],[15,15,6,15],[15,18,6,18,"bx"],[15,20,6,20],[16,4,7,2],[16,8,7,8,"dy"],[16,10,7,10],[16,13,7,13,"ay"],[16,15,7,15],[16,18,7,18,"by"],[16,20,7,20],[17,4,8,2],[17,11,8,9,"Math"],[17,15,8,13],[17,16,8,14,"sqrt"],[17,20,8,18],[17,21,8,19,"dx"],[17,23,8,21],[17,26,8,24,"dx"],[17,28,8,26],[17,31,8,29,"dy"],[17,33,8,31],[17,36,8,34,"dy"],[17,38,8,36],[17,39,8,37],[18,2,9,0],[18,3,9,1],[19,2,11,7],[19,6,11,13,"getTurnInstruction"],[19,24,11,31],[19,27,11,34,"getTurnInstruction"],[19,28,12,2,"userLocation"],[19,40,12,47],[19,42,13,2,"route"],[19,47,13,66],[19,52,14,5],[20,4,15,2],[20,8,15,6],[20,9,15,7,"userLocation"],[20,21,15,19],[20,25,15,23],[20,26,15,24,"route"],[20,31,15,29],[20,35,15,33,"route"],[20,40,15,38],[20,41,15,39,"length"],[20,47,15,45],[20,50,15,48],[20,51,15,49],[20,53,15,51],[20,60,15,58],[20,64,15,62],[21,4,17,2],[21,8,17,6,"closestIndex"],[21,20,17,18],[21,23,17,21],[21,24,17,22],[21,25,17,23],[22,4,18,2],[22,8,18,6,"closestDist"],[22,19,18,17],[22,22,18,20,"Number"],[22,28,18,26],[22,29,18,27,"POSITIVE_INFINITY"],[22,46,18,44],[23,4,20,2],[23,9,20,7],[23,13,20,11,"i"],[23,14,20,12],[23,17,20,15],[23,18,20,16],[23,20,20,18,"i"],[23,21,20,19],[23,24,20,22,"route"],[23,29,20,27],[23,30,20,28,"length"],[23,36,20,34],[23,38,20,36,"i"],[23,39,20,37],[23,43,20,41],[23,44,20,42],[23,46,20,44],[24,6,21,4],[24,10,21,10,"p"],[24,11,21,11],[24,14,21,14,"route"],[24,19,21,19],[24,20,21,20,"i"],[24,21,21,21],[24,22,21,22],[25,6,22,4],[25,10,22,10,"d"],[25,11,22,11],[25,14,22,14,"distance"],[25,22,22,22],[25,23,22,23,"userLocation"],[25,35,22,35],[25,36,22,36,"x"],[25,37,22,37],[25,39,22,39,"userLocation"],[25,51,22,51],[25,52,22,52,"y"],[25,53,22,53],[25,55,22,55,"p"],[25,56,22,56],[25,57,22,57,"x"],[25,58,22,58],[25,60,22,60,"p"],[25,61,22,61],[25,62,22,62,"y"],[25,63,22,63],[25,64,22,64],[26,6,23,4],[26,10,23,8,"d"],[26,11,23,9],[26,14,23,12,"closestDist"],[26,25,23,23],[26,27,23,25],[27,8,24,6,"closestDist"],[27,19,24,17],[27,22,24,20,"d"],[27,23,24,21],[28,8,25,6,"closestIndex"],[28,20,25,18],[28,23,25,21,"i"],[28,24,25,22],[29,6,26,4],[30,4,27,2],[31,4,29,2],[31,8,29,6,"closestDist"],[31,19,29,17],[31,22,29,20,"TURN_RADIUS"],[31,33,29,31],[31,37,29,35,"closestIndex"],[31,49,29,47],[31,52,29,50],[31,53,29,51],[31,55,29,53],[31,62,29,60],[31,66,29,64],[32,4,31,2],[32,8,31,6,"closestIndex"],[32,20,31,18],[32,25,31,23,"route"],[32,30,31,28],[32,31,31,29,"length"],[32,37,31,35],[32,40,31,38],[32,41,31,39],[32,43,31,41],[33,6,32,4],[33,13,32,11],[33,31,32,29],[34,4,33,2],[35,4,35,2],[35,8,35,6,"closestIndex"],[35,20,35,18],[35,25,35,23],[35,26,35,24],[35,30,35,28,"closestIndex"],[35,42,35,40],[35,46,35,44,"route"],[35,51,35,49],[35,52,35,50,"length"],[35,58,35,56],[35,61,35,59],[35,62,35,60],[35,64,35,62],[36,6,36,4],[36,13,36,11],[36,17,36,15],[37,4,37,2],[38,4,39,2],[38,8,39,8,"prev"],[38,12,39,12],[38,15,39,15,"route"],[38,20,39,20],[38,21,39,21,"closestIndex"],[38,33,39,33],[38,36,39,36],[38,37,39,37],[38,38,39,38],[39,4,40,2],[39,8,40,8,"curr"],[39,12,40,12],[39,15,40,15,"route"],[39,20,40,20],[39,21,40,21,"closestIndex"],[39,33,40,33],[39,34,40,34],[40,4,41,2],[40,8,41,8,"next"],[40,12,41,12],[40,15,41,15,"route"],[40,20,41,20],[40,21,41,21,"closestIndex"],[40,33,41,33],[40,36,41,36],[40,37,41,37],[40,38,41,38],[41,4,43,2],[41,8,43,8,"v1x"],[41,11,43,11],[41,14,43,14,"curr"],[41,18,43,18],[41,19,43,19,"x"],[41,20,43,20],[41,23,43,23,"prev"],[41,27,43,27],[41,28,43,28,"x"],[41,29,43,29],[42,4,44,2],[42,8,44,8,"v1y"],[42,11,44,11],[42,14,44,14,"curr"],[42,18,44,18],[42,19,44,19,"y"],[42,20,44,20],[42,23,44,23,"prev"],[42,27,44,27],[42,28,44,28,"y"],[42,29,44,29],[43,4,45,2],[43,8,45,8,"v2x"],[43,11,45,11],[43,14,45,14,"next"],[43,18,45,18],[43,19,45,19,"x"],[43,20,45,20],[43,23,45,23,"curr"],[43,27,45,27],[43,28,45,28,"x"],[43,29,45,29],[44,4,46,2],[44,8,46,8,"v2y"],[44,11,46,11],[44,14,46,14,"next"],[44,18,46,18],[44,19,46,19,"y"],[44,20,46,20],[44,23,46,23,"curr"],[44,27,46,27],[44,28,46,28,"y"],[44,29,46,29],[45,4,48,2],[45,8,48,8,"dot"],[45,11,48,11],[45,14,48,14,"v1x"],[45,17,48,17],[45,20,48,20,"v2x"],[45,23,48,23],[45,26,48,26,"v1y"],[45,29,48,29],[45,32,48,32,"v2y"],[45,35,48,35],[46,4,49,2],[46,8,49,8,"mag1"],[46,12,49,12],[46,15,49,15,"Math"],[46,19,49,19],[46,20,49,20,"sqrt"],[46,24,49,24],[46,25,49,25,"v1x"],[46,28,49,28],[46,31,49,31,"v1x"],[46,34,49,34],[46,37,49,37,"v1y"],[46,40,49,40],[46,43,49,43,"v1y"],[46,46,49,46],[46,47,49,47],[47,4,50,2],[47,8,50,8,"mag2"],[47,12,50,12],[47,15,50,15,"Math"],[47,19,50,19],[47,20,50,20,"sqrt"],[47,24,50,24],[47,25,50,25,"v2x"],[47,28,50,28],[47,31,50,31,"v2x"],[47,34,50,34],[47,37,50,37,"v2y"],[47,40,50,40],[47,43,50,43,"v2y"],[47,46,50,46],[47,47,50,47],[48,4,51,2],[48,8,51,6,"mag1"],[48,12,51,10],[48,17,51,15],[48,18,51,16],[48,22,51,20,"mag2"],[48,26,51,24],[48,31,51,29],[48,32,51,30],[48,34,51,32],[48,41,51,39],[48,45,51,43],[49,4,53,2],[49,8,53,8,"angle"],[49,13,53,13],[49,16,53,16,"Math"],[49,20,53,20],[49,21,53,21,"acos"],[49,25,53,25],[49,26,53,26,"Math"],[49,30,53,30],[49,31,53,31,"max"],[49,34,53,34],[49,35,53,35],[49,36,53,36],[49,37,53,37],[49,39,53,39,"Math"],[49,43,53,43],[49,44,53,44,"min"],[49,47,53,47],[49,48,53,48],[49,49,53,49],[49,51,53,51,"dot"],[49,54,53,54],[49,58,53,58,"mag1"],[49,62,53,62],[49,65,53,65,"mag2"],[49,69,53,69],[49,70,53,70],[49,71,53,71],[49,72,53,72],[49,73,53,73],[49,77,53,77],[49,80,53,80],[49,83,53,83,"Math"],[49,87,53,87],[49,88,53,88,"PI"],[49,90,53,90],[49,91,53,91],[50,4,54,2],[50,8,54,8,"distanceLabel"],[50,21,54,21],[50,24,54,24,"Math"],[50,28,54,28],[50,29,54,29,"max"],[50,32,54,32],[50,33,54,33],[50,34,54,34],[50,36,54,36,"Math"],[50,40,54,40],[50,41,54,41,"round"],[50,46,54,46],[50,47,54,47,"closestDist"],[50,58,54,58],[50,59,54,59],[50,60,54,60],[51,4,55,2],[51,8,55,6,"angle"],[51,13,55,11],[51,16,55,14],[51,18,55,16],[51,20,55,18],[51,27,55,25],[51,33,55,31,"distanceLabel"],[51,46,55,44],[51,69,55,67],[52,4,57,2],[52,8,57,8,"cross"],[52,13,57,13],[52,16,57,16,"v1x"],[52,19,57,19],[52,22,57,22,"v2y"],[52,25,57,25],[52,28,57,28,"v1y"],[52,31,57,31],[52,34,57,34,"v2x"],[52,37,57,37],[53,4,58,2],[53,11,58,9,"cross"],[53,16,58,14],[53,19,58,17],[53,20,58,18],[53,23,59,6],[53,29,59,12,"distanceLabel"],[53,42,59,25],[53,58,59,41],[53,61,60,6],[53,67,60,12,"distanceLabel"],[53,80,60,25],[53,95,60,40],[54,2,61,0],[54,3,61,1],[55,0,61,2],[55,3]],"functionMap":{"names":["<global>","distance","getTurnInstruction"],"mappings":"AAA;iBCI;CDI;kCEE;CFkD"},"hasCjsExports":false},"type":"js/module"}]}